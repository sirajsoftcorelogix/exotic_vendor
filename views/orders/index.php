<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Roboto:wght@400&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Inter', sans-serif;
        background-color: #f9fafb;
    }
    .product-title {
        font-weight: 600;
        font-size: 13px;
        color: rgba(58, 58, 73, 1);
    }
    .item-code, .quantity {
        font-weight: 400;
        font-size: 13px;
        color: rgba(58, 58, 73, 1);
    }
    .heading-typography {
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        font-size: 13px;
        line-height: 1;
        letter-spacing: -0.02em;
        color: rgba(121, 122, 124, 1);
    }
    .data-typography {
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
        font-size: 14px;
        line-height: 18px;
        letter-spacing: 0.2px;
        color: rgba(0, 0, 0, 1);
    }
    .custom-checkbox:checked {
        background-color: rgba(208, 103, 6, 1);
        border-color: rgba(208, 103, 6, 1);
    }
    .custom-checkbox {
        appearance: none;
        -webkit-appearance: none;
        height: 14px;
        width: 14px;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        cursor: pointer;
        display: inline-block;
        position: relative;
    }
    .custom-checkbox:checked::after {
        content: '✓';
        font-size: 10px;
        color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
    .set-priority-title {
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        font-size: 13px;
        color: rgba(121, 122, 124, 1);
    }
    .urgent-text {
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
        font-size: 14px;
        line-height: 18px;
        letter-spacing: 0.2px;
        color: rgba(255, 0, 4, 1);
    }
    .download-invoice {
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        font-size: 13px;
        color: rgba(9, 9, 9, 1);
    }
    .note-heading {
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        font-size: 13px;
        line-height: 1;
        letter-spacing: -0.02em;
        color: rgba(121, 122, 124, 1);
    }
    .note-content {
        font-family: 'Inter', sans-serif;
        font-weight: 400;
        font-size: 12px;
        letter-spacing: 0.2px;
        color: rgba(121, 122, 124, 1);
    }
    .pending-text {
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
        font-size: 14px;
        line-height: 18px;
        letter-spacing: 0.2px;
        color: rgba(7, 7, 7, 1);
    }
    
   
</style>
<div class="container mx-auto p-4">
    <!-- Header Section -->
    <!-- Stats Section -->
    <div class="mt-6 sm:mt-8">
        <div class="bg-white rounded-xl shadow-sm p-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5">

                <!-- Stat Card: PO Pending -->
                <div class="flex items-center space-x-3 p-3 lg:border-r lg:border-gray-200">
                    <div class="icon-gradient w-[64px] h-[64px] rounded-full flex items-center justify-center flex-shrink-0">
                        <svg height="30" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.4291 0C16.4958 0.134316 16.6987 0.133377 16.7766 0.216033C16.9701 0.421734 17.8174 2.55764 17.8897 2.90611C17.9667 3.27806 17.9122 3.68477 17.5901 3.93274C17.4041 4.07551 15.441 4.68885 15.1207 4.74803C14.8004 4.8072 14.5252 4.84947 14.235 4.68603C13.8067 4.44558 13.7644 3.63123 14.1129 3.31751C14.2641 3.18132 14.5844 3.19823 14.6464 3.00755C10.4056 0.817168 5.11839 2.30779 2.77584 6.48005C-0.459019 12.2415 3.53477 19.3509 10.0918 19.6364C10.6441 19.6609 11.7684 19.4467 12.1488 19.644C12.7453 19.9539 12.7021 20.8115 12.0897 21.0641C11.8295 21.1712 11.559 21.0604 11.3627 21.2285H9.67386C9.08494 21.0923 8.48098 21.0425 7.89018 20.8998C4.23077 20.0187 1.24013 16.9839 0.337484 13.3377L0.00873877 11.3652C0.0284635 10.9933 -0.0185001 10.6091 0.00873877 10.2381C0.495282 3.62747 6.66819 -0.864131 13.1107 0.739208C13.9785 0.955241 14.7666 1.35349 15.5847 1.68975C15.1649 0.99563 15.1846 0.37477 15.9604 0H16.4291Z" fill="white"/>
                            <path d="M20.9329 10.238C20.9047 10.6006 20.9723 11.0101 20.9329 11.3651C20.9178 11.4976 20.8155 11.9719 20.7685 12.0931C20.4999 12.7825 19.2628 12.6397 19.2394 11.6901C19.2309 11.3238 19.2497 10.471 19.2741 10.1093C19.3474 9.0226 20.8615 9.15597 20.9329 10.238Z" fill="white"/>
                            <path d="M10.5288 11.5428L13.9844 13.0147C14.6776 13.6252 14.2277 14.6048 13.31 14.4442C12.66 14.0779 9.18284 12.8653 8.97151 12.3966L8.91797 6.42847C9.03444 5.54931 10.4471 5.59252 10.4959 6.54964L10.5298 11.5419L10.5288 11.5428Z" fill="white"/>
                            <path d="M16.0291 17.7681C16.789 17.6535 17.3018 18.4153 16.85 19.0653C16.7072 19.27 15.3819 20.0787 15.1189 20.1501C14.406 20.3436 13.9448 19.843 14.1036 19.1348C14.2144 18.6416 15.612 18.1373 16.0291 17.7681Z" fill="white"/>
                            <path d="M18.4721 4.80622C19.1728 4.71605 19.8941 6.0949 20.0444 6.66504C20.3347 7.77057 19.2028 8.23739 18.6036 7.35729C18.4495 7.13092 17.7573 5.78494 17.7563 5.58864C17.7563 5.20166 18.0973 4.85412 18.4721 4.80622Z" fill="white"/>
                            <path d="M18.9362 14.1098C19.697 13.9276 20.1309 14.3981 19.9741 15.1486C19.9243 15.3853 19.1916 16.6618 19.0122 16.8149C18.3989 17.3362 17.4793 16.8712 17.6681 16.0353C17.6897 15.9404 18.5248 14.4329 18.6018 14.3371C18.7023 14.2103 18.7746 14.1492 18.9371 14.1098H18.9362Z" fill="white"/>
                            <path d="M19.5445 24.2417C19.9146 24.1591 20.1748 24.2126 20.5298 24.2802C21.6344 24.4906 26.405 26.0076 27.3198 26.5119C28.802 27.3282 28.245 29.5693 26.2133 29.3307C25.4516 29.2415 20.0329 27.4268 19.3228 27.0417C18.0877 26.3701 18.2755 24.5254 19.5436 24.2417H19.5445Z" fill="white"/>
                            <path d="M22.1963 18.0163C22.6913 17.9318 23.1365 18.1393 23.5967 18.2577C24.6872 18.5385 29.2436 19.9474 29.9706 20.4406C31.3072 21.347 30.6244 23.3561 28.7026 23.1071C27.7727 22.9869 22.7532 21.3338 21.9154 20.8736C20.5027 20.0968 20.8212 18.2511 22.1972 18.0163H22.1963Z" fill="white"/>
                            <path d="M23.9901 14.2094C23.095 13.1368 23.945 11.6743 25.4178 11.7626C26.4059 11.8218 31.3024 13.1809 32.298 13.6008C33.9445 14.2949 33.5594 16.4458 31.8162 16.5754C30.4598 15.9856 24.7228 15.0876 23.9901 14.2104V14.2094Z" fill="white"/>
                            <path d="M15.351 22.5314C17.7001 22.151 18.0251 25.3792 15.8958 25.5774C14.021 25.7521 13.3578 22.8545 15.351 22.5314Z" fill="white"/>
                            <path d="M11.5017 24.6006L12.487 21.9133C12.4738 21.919 12.4607 21.9255 12.4475 21.9312C12.1883 22.0383 11.9487 22.0505 11.8032 22.057C11.6688 22.1284 11.5176 22.166 11.3636 22.166H9.67477C9.60338 22.166 9.532 22.1575 9.46249 22.1416C9.44934 22.1388 9.43619 22.1359 9.42304 22.1331L8.88672 23.6256C9.07927 24.9312 10.4985 25.4647 11.5026 24.5997L11.5017 24.6006Z" fill="white"/>
                            <path d="M41.1134 6.49604L18.5417 1.91333C18.6854 2.30501 18.7888 2.61685 18.8094 2.71547C18.8958 3.12969 18.8695 3.52794 18.7437 3.87735C19.558 3.98725 20.1667 4.76215 20.5405 5.44969L38.4121 8.96633C37.0661 13.2072 35.6966 17.4517 34.2144 21.6465C32.9051 25.352 30.1634 34.1041 27.6762 36.7322C25.3778 39.1621 21.4028 38.7338 20.4409 35.2585C20.1864 34.3399 19.9638 32.8962 20.2099 31.9945L2.79012 24.9875C1.89311 28.4393 2.61354 32.0715 5.75635 34.0759C14.3159 36.89 25.498 47.6588 31.9057 35.8267C33.8209 32.2894 35.335 27.5076 36.7045 23.6688C38.2486 19.3406 39.9346 14.6846 41.2158 10.2898C41.5596 9.10816 42.4923 7.24652 41.1134 6.49604Z" fill="white"/>
                            <path d="M16.8168 5.59065C16.8168 5.46103 16.8337 5.33423 16.8628 5.21118C16.211 5.4244 15.5328 5.61319 15.3393 5.66015L13.1865 11.6537L14.3521 12.1505C14.4442 12.19 14.5297 12.2435 14.6048 12.3102C15.2388 12.8691 15.4351 13.7219 15.0932 14.433C14.803 15.0379 14.1859 15.4004 13.4955 15.4004C13.3809 15.4004 13.2645 15.3901 13.147 15.3704C13.0419 15.3516 12.9404 15.3159 12.8474 15.2633C12.7281 15.1957 12.3919 15.0538 12.019 14.9007L10.6646 18.6719C10.6955 18.6691 10.7265 18.6672 10.7575 18.6644C11.446 18.6099 12.096 18.5583 12.5807 18.81C12.8023 18.9255 12.9902 19.0814 13.1377 19.2665C13.1452 19.1556 13.1602 19.0429 13.1856 18.9293C13.2804 18.5066 13.5754 18.1919 13.9482 17.9252L17.7053 7.68147C17.4377 7.21371 16.8168 6.07437 16.8159 5.59159L16.8168 5.59065Z" fill="white"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-500 stat-heading">PO Pending</p>
                        <p class="text-gray-800 stat-number mt-1">56</p>
                        <div class="flex items-center text-increase mt-1">
                            <svg class="mr-1" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 17L10 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M4.1665 10.0001L9.99984 4.16675L15.8332 10.0001" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <span class="stat-change-text"><span class="stat-change-percentage">16%</span><span class="stat-change-period"> this month</span></span>
                        </div>
                    </div>
                </div>

                <!-- Stat Card: PO Sent -->
                <div class="flex items-center space-x-3 p-3 lg:border-r lg:border-gray-200">
                    <div class="icon-gradient w-[64px] h-[64px] rounded-full flex items-center justify-center flex-shrink-0">
                        <svg height="30" viewBox="0 0 43 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15.8978 23.8415C16.2416 23.7647 16.4833 23.8145 16.8132 23.8773C17.8394 24.0728 22.2714 25.4821 23.1213 25.9506C24.4983 26.709 23.9809 28.791 22.0934 28.5694C21.3857 28.4865 16.3515 26.8006 15.6918 26.4428C14.5443 25.8189 14.7189 24.1051 15.8969 23.8415H15.8978Z" fill="white"/>
                            <path d="M18.3613 18.0579C18.8211 17.9793 19.2348 18.1722 19.6623 18.2821C20.6755 18.543 24.9085 19.852 25.5839 20.3101C26.8257 21.1522 26.1913 23.0187 24.4059 22.7875C23.542 22.6758 18.8787 21.14 18.1004 20.7124C16.7879 19.9907 17.0837 18.276 18.3621 18.0579H18.3613Z" fill="white"/>
                            <path d="M20.0281 14.5211C19.1965 13.5246 19.9862 12.1659 21.3545 12.2479C22.2725 12.3029 26.8215 13.5656 27.7464 13.9556C29.2761 14.6005 28.9184 16.5988 27.2988 16.7192C26.0387 16.1712 20.7088 15.337 20.0281 14.522V14.5211Z" fill="white"/>
                            <path d="M15.7496 17.2079C16.7967 18.3379 15.5707 20.1818 13.9144 19.4043C11.8315 18.426 14.1893 15.5237 15.7496 17.2079Z" fill="white"/>
                            <path d="M12.0017 22.2525C14.1842 21.8991 14.4861 24.8983 12.5078 25.0825C10.7661 25.2448 10.15 22.5527 12.0017 22.2525Z" fill="white"/>
                            <path d="M15.6997 11.2882C16.8315 10.1442 19.0855 11.5098 18.1108 13.0491C16.9912 14.8171 14.2547 12.749 15.6997 11.2882Z" fill="white"/>
                            <path d="M41.993 3.60377C41.9267 3.45281 41.8098 3.34548 41.664 3.30097C41.5811 3.27567 41.3368 3.24425 41.2443 3.25123H41.2312L26.5773 6.62304L26.5659 6.62653C26.1951 6.7391 25.9403 7.02968 25.901 7.38571C25.8626 7.73738 26.0467 8.07246 26.3836 8.26095L29.8226 10.1013L30.3191 14.1738C30.3592 14.4339 30.5093 14.6424 30.7301 14.7463C30.8278 14.7925 30.9343 14.8152 31.0425 14.8152C31.1882 14.8152 31.3374 14.7742 31.4736 14.693L34.2468 12.4574L37.1247 13.9731C37.5191 14.1572 37.9685 14.0456 38.2416 13.6956L38.2573 13.6756L41.993 4.10291C42.0637 3.95195 42.0637 3.76608 41.993 3.60464V3.60377ZM40.2801 5.45984L37.4231 12.8832L33.5521 10.8142L40.2809 5.45984H40.2801ZM33.2293 11.8954C33.0399 12.0699 32.7816 12.2724 32.5399 12.4574L32.8523 11.7139L33.2293 11.8954ZM36.4562 7.09513L32.1952 10.5062L32.1786 10.5385C31.9518 10.9739 31.7668 11.4504 31.5888 11.9111C31.4814 12.1877 31.3723 12.4705 31.2537 12.7427L30.957 10.0393L36.4571 7.09425L36.4562 7.09513ZM37.6273 5.20329L30.2632 9.08907L27.4124 7.58467L37.6264 5.20241L37.6273 5.20329Z" fill="white"/>
                            <path d="M29.5161 7.8561L30.2631 8.25053L32.1933 7.23218L29.5161 7.8561Z" fill="white"/>
                            <path d="M36.0313 10.8798C36.1543 10.4566 36.3585 9.94004 36.4894 9.42432L34.896 10.6922L35.9239 11.2411C35.9597 11.1207 35.9964 10.9994 36.0313 10.8798Z" fill="white"/>
                            <path d="M34.3338 13.3406L31.9603 15.2551C31.9262 15.2822 31.8905 15.3075 31.8538 15.3293C31.757 15.3869 31.6557 15.4331 31.5528 15.4689C30.8974 17.4628 30.2255 19.4515 29.5274 21.4289C28.311 24.8714 25.7638 33.0025 23.4531 35.4441C21.3178 37.7015 17.6249 37.3036 16.7313 34.0749C16.4948 33.2215 16.288 31.8803 16.5166 31.0426L0.332134 24.5346C-0.501219 27.7414 0.168081 31.1159 3.08787 32.978C11.0401 35.5924 21.4286 45.597 27.3816 34.6046C29.1609 31.3183 30.5676 26.8758 31.8399 23.3094C32.9402 20.2256 34.1174 16.9628 35.1436 13.7673L34.3347 13.3414L34.3338 13.3406Z" fill="white"/>
                            <path d="M8.42585 24.175L15.077 6.03843L25.2587 8.04197C25.1714 7.8116 25.1365 7.56116 25.1645 7.30461C25.236 6.64752 25.6907 6.11522 26.3512 5.91539C26.3713 5.90929 26.3914 5.90405 26.4114 5.89969L27.5162 5.64575L14.5429 3.01131C13.8614 2.93714 13.2462 3.2286 12.9687 3.8595L5.99561 23.2701C6.17449 24.483 7.49302 24.9787 8.42585 24.175Z" fill="white"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-500 stat-heading">PO Sent</p>
                        <p class="text-gray-800 stat-number mt-1">26</p>
                        <div class="flex items-center text-decrease mt-1">
                            <svg class="mr-1" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 3L10 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.8335 9.99992L10.0002 15.8333L4.16683 9.99992" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <span class="stat-change-text"><span class="stat-change-percentage">1%</span><span class="stat-change-period"> this month</span></span>
                        </div>
                    </div>
                </div>

                <!-- Stat Card: Due Receipt -->
                <div class="flex items-center space-x-3 p-3 lg:border-r lg:border-gray-200">
                    <div class="icon-gradient w-[64px] h-[64px] rounded-full flex items-center justify-center flex-shrink-0">
                        <svg height="30" viewBox="0 0 40 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7.29684 2.73538C7.35402 1.86903 6.9623 0.30644 8.11459 0.049106C8.95521 -0.138176 9.62857 0.210654 9.7315 1.08845C9.88161 2.36654 9.85445 5.36448 9.73579 6.67402C9.54279 8.80417 7.29827 7.89206 7.29827 7.23872V5.16576H4.51049C3.9758 5.16576 2.43752 6.41811 2.43752 6.9528V10.8843H35.1761V6.9528C35.1761 6.3209 33.4848 5.0328 32.7457 5.16576V2.73538C34.4527 2.88121 36.0582 3.67322 36.9517 5.17719C37.0861 5.40307 37.6064 6.50961 37.6064 6.66687V19.3191L35.1761 16.8173V13.3147H2.43609V30.8276C2.43609 31.4681 4.08303 32.6933 4.81071 32.599L14.0633 32.609L15.3028 34.9021H3.79424C2.306 34.9021 0.0500371 32.3388 0.0214445 30.8119L0 7.23443C0.065763 5.01564 2.45611 2.73681 4.65202 2.73681H7.29684V2.73538Z" fill="white"/>
                            <path d="M17.7331 27.182C18.3793 26.9833 18.4979 26.4129 19.3114 26.6717C20.4622 27.0391 20.2993 28.1027 19.6631 28.899C19.3085 29.3436 17.683 31.1621 17.3113 31.408C16.8867 31.6897 16.3878 31.7383 15.9375 31.4781C15.6101 31.2908 13.5886 29.0877 13.2998 28.6846C12.4963 27.5652 13.3798 26.2785 14.595 26.6745C14.9396 26.786 15.0682 27.1963 15.4442 27.182C15.327 24.9904 16.0861 22.763 17.2999 20.9603C20.8468 15.6921 28.2609 14.5141 33.3003 18.4055C34.0423 18.9788 35.1889 19.6822 34.5227 20.743C34.2096 21.2405 33.825 21.3977 33.2389 21.332C32.8514 21.2877 31.4976 20.021 30.8885 19.6765C24.967 16.3211 17.959 20.5128 17.7345 27.1835L17.7331 27.182Z" fill="white"/>
                            <path d="M37.6064 27.1821C37.6608 35.88 28.2381 41.2454 20.691 36.7335C20.1092 36.3861 18.4866 35.2681 18.3336 34.6505C18.1535 33.9171 18.8826 32.9993 19.6517 33.045C20.002 33.0665 21.7418 34.5976 22.3537 34.9264C28.1166 38.0216 35.289 33.8714 35.1718 27.3251C34.1882 28.3601 32.6013 27.7096 32.8887 26.2557C33.0159 25.6152 35.259 23.8296 35.6464 23.0819C35.8551 22.9633 36.1482 22.7717 36.3855 22.766C37.332 22.746 39.2091 25.3851 39.9253 26.0741C40.4085 27.7454 38.713 28.4416 37.605 27.1821H37.6064Z" fill="white"/>
                            <path d="M17.5901 2.73544C17.6315 1.73184 17.2312 0.112065 18.6637 0.0105616C19.5558 -0.0523421 19.9504 0.387984 20.0262 1.22718C20.1534 2.62965 20.1534 5.41457 20.0262 6.81561C19.8789 8.43252 17.7988 8.38391 17.5986 6.94284C17.52 6.381 17.6344 5.73766 17.5901 5.16581H12.1575V2.73544H17.5901Z" fill="white"/>
                            <path d="M27.8835 2.73544C27.925 1.73184 27.5247 0.112065 28.9572 0.0105616C29.8493 -0.0523421 30.2438 0.387984 30.3196 1.22718C30.4469 2.62965 30.4469 5.41457 30.3196 6.81561C30.1724 8.43252 28.0923 8.38391 27.8921 6.94284C27.8135 6.381 27.9278 5.73766 27.8835 5.16581H22.4509V2.73544H27.8835Z" fill="white"/>
                            <path d="M25.9822 20.7803C28.8829 19.9168 27.3132 25.3136 27.8035 26.7618C28.1523 27.561 30.161 28.8591 30.2911 29.5753C30.434 30.3702 29.5791 31.1622 28.8471 31.0207C28.5012 30.9535 25.4861 27.9827 25.3746 27.6182C25.4503 25.8354 25.0486 23.3936 25.3188 21.6852C25.3689 21.3693 25.6705 20.8703 25.9836 20.7774L25.9822 20.7803Z" fill="white"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-500 stat-heading">Due Receipt</p>
                        <p class="text-gray-800 stat-number mt-1">16</p>
                        <div class="flex items-center text-decrease mt-1">
                            <svg class="mr-1" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 3L10 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.8335 9.99992L10.0002 15.8333L4.16683 9.99992" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <span class="stat-change-text"><span class="stat-change-percentage">6%</span><span class="stat-change-period"> this month</span></span>
                        </div>
                    </div>
                </div>

                <!-- Stat Card: Received -->
                <div class="flex items-center space-x-3 p-3 lg:border-r lg:border-gray-200">
                    <div class="icon-gradient w-[64px] h-[64px] rounded-full flex items-center justify-center flex-shrink-0">
                        <svg height="30" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M38.5821 20.624C38.0778 19.1406 36.5509 18.7609 35.2245 19.0191V4.52138C35.2245 4.20546 35.0189 3.82576 34.6605 3.47946C34.3435 3.17266 33.8474 2.84864 33.4181 2.86585H17.5787C17.4723 2.75852 17.2395 2.44159 17.0947 2.24415C16.9154 2.00012 16.7615 1.78951 16.6603 1.68724C15.2954 0.312191 13.2824 -0.274078 11.2765 0.120819C9.24433 0.520778 7.58374 1.84115 6.83242 3.65261C6.08111 5.46407 6.23198 7.46386 7.24453 9.13863C8.20342 10.7253 9.782 11.7541 11.6005 11.9869L11.5874 22.2755C11.5145 22.3353 11.4426 22.394 11.3717 22.4517C10.992 22.7605 10.6336 23.0532 10.2964 23.4612C10.1556 23.6313 9.85693 24.0606 9.47823 24.6044C8.96081 25.3476 8.11128 26.5687 7.85814 26.8006L6.21983 26.8057C5.9029 26.2133 5.42599 25.5734 4.56633 25.461C3.82007 25.3628 1.59954 25.3577 0.794561 25.4529C0.292334 25.5116 -0.00434432 25.8468 0.000718454 26.347V37.7939C-0.016495 38.2506 0.277146 38.6161 0.715582 38.685C1.03251 38.7346 1.70789 38.7569 2.41566 38.7569C3.27329 38.7569 4.17953 38.7245 4.5562 38.6708C5.45333 38.5422 6.15705 37.8132 6.25932 36.9565C8.00395 36.9869 9.5886 36.7439 10.9748 36.2336C11.395 36.0787 11.798 35.8802 12.1878 35.6888C12.609 35.4823 13.0434 35.2676 13.4879 35.1167C15.1759 34.5416 16.9286 34.5406 18.7856 34.5406C21.1064 34.5396 23.5051 34.5386 25.7692 33.3215C28.8626 31.6589 33.088 27.8749 35.8826 25.3699L36.3524 24.9487C36.4588 24.8535 36.5681 24.7573 36.6795 24.6601C37.8034 23.6779 39.2018 22.4557 38.5801 20.625L38.5821 20.624ZM23.0981 9.75528V4.50923H27.2151V9.77553C27.0157 9.66111 26.7828 9.50214 26.556 9.3462C26.0355 8.98978 25.5434 8.6526 25.1678 8.6283C25.1576 8.6283 25.1475 8.6283 25.1374 8.6283C24.8286 8.6283 24.3719 8.91688 23.6702 9.38569C23.4717 9.51834 23.2692 9.65301 23.0991 9.75629L23.0981 9.75528ZM12.8541 10.3689C11.1732 10.5187 9.7739 9.92032 8.91322 8.68501C7.97965 7.34438 7.82777 5.43977 8.53554 3.94524C9.1775 2.58943 10.4118 1.77533 12.0106 1.65079C14.9875 1.41993 16.5297 3.55642 16.7028 5.64025C16.877 7.73725 15.748 10.1117 12.8541 10.3689ZM18.4768 5.79922C18.4687 5.51672 18.411 5.23523 18.3563 4.96184C18.3249 4.80591 18.2945 4.65605 18.2733 4.50923H21.3788V11.1911C21.3788 11.4442 21.5124 11.6984 21.7362 11.8705C21.9489 12.0335 22.205 12.0912 22.441 12.0285L22.4734 12.0193L25.1657 10.458C25.511 10.6372 25.8533 10.859 26.1844 11.0746C26.7565 11.4473 27.3488 11.832 28.009 12.0376L28.0556 12.0517L28.1042 12.0477C28.334 12.0295 28.8585 11.7713 28.8585 11.4169V4.50923H33.333C33.4241 4.53151 33.5932 4.77857 33.5851 4.87577V4.88691L33.572 19.6307L25.6508 23.8065C25.269 23.0633 24.5592 22.5671 23.6712 22.4314L23.6459 22.4284C22.3053 22.3585 20.9434 22.2634 19.625 22.1712C17.5361 22.0254 15.3784 21.8756 13.2439 21.8199V11.991C14.6433 11.8371 15.9495 11.1273 16.9438 9.975C17.9614 8.79639 18.5203 7.27452 18.4758 5.79821L18.4768 5.79922ZM13.9375 23.4551C15.2538 23.4815 16.6623 23.607 18.0242 23.7295C18.7482 23.7943 19.4964 23.8612 20.2123 23.9118C20.6356 23.9412 21.0841 23.9543 21.5165 23.9665C22.1402 23.9847 22.7852 24.0029 23.3745 24.0718C24.0003 24.1447 24.2808 24.6297 24.2818 25.0783C24.2818 25.4813 24.0479 25.9805 23.3816 26.0615C22.4642 26.1728 21.5013 26.2032 20.5708 26.2316C19.7516 26.2569 18.9041 26.2832 18.0829 26.3652C17.521 26.4209 17.1574 26.591 17.0015 26.8715C16.9225 27.0133 16.8628 27.2512 17.0248 27.5803C17.3205 28.1817 17.8662 28.0967 18.2267 28.04C18.3239 28.0248 18.415 28.0106 18.4971 28.0066C18.7715 27.9954 19.0469 27.9843 19.3243 27.9732C20.4776 27.9276 21.6704 27.88 22.8277 27.7767C24.1653 27.6572 25.5019 27.3869 25.916 25.5724C27.2243 24.9679 28.496 24.2186 29.7263 23.4926C31.077 22.6957 32.4733 21.8725 33.9071 21.2508C36.1337 20.2848 36.7453 20.6615 36.9124 20.9713C37.2708 21.6396 36.9357 22.1611 36.236 22.8355C34.8053 24.2146 33.0232 25.6777 31.4507 26.9687C31.2401 27.1419 31.0325 27.312 30.8279 27.48C30.6295 27.6431 30.427 27.8111 30.2194 27.9833C28.7168 29.2277 27.0126 30.6392 25.4351 31.586C23.253 32.8952 20.9464 32.9043 18.5041 32.9134C16.5631 32.9205 14.5572 32.9286 12.6323 33.6536C12.0775 33.8622 11.6066 34.0677 11.151 34.2662C9.90755 34.8079 8.92436 35.2362 7.18277 35.3101C7.14328 35.3122 7.10176 35.3142 7.05822 35.3162C6.83242 35.3284 6.48006 35.3456 6.26843 35.2848V28.4602H8.47884C8.69046 28.4602 8.99524 28.125 9.00739 28.1109C9.47924 27.5884 9.88426 26.9505 10.2751 26.3338C11.2269 24.8342 12.1301 23.4187 13.9335 23.4541L13.9375 23.4551ZM4.64632 31.8674C4.70707 33.445 4.76985 35.0752 4.63316 36.5616C4.61392 36.7763 4.459 37.0477 4.31319 37.0477H1.64814V27.1165C2.02684 27.1348 2.443 27.1094 2.84802 27.0841C3.38063 27.0517 3.93146 27.0173 4.34458 27.0902C4.48127 27.1145 4.61696 27.3018 4.63012 27.4811C4.5319 28.8936 4.59063 30.4043 4.64632 31.8664V31.8674Z" fill="white"/>
                            <path d="M15.6447 14.4839C15.3976 14.5376 15.0868 14.7411 15.0128 15.4074C14.9065 16.3703 14.9065 18.8248 15.0128 19.7837C15.0716 20.3102 15.2417 20.6727 15.8826 20.7314C16.4588 20.7841 17.4085 20.8144 18.3371 20.8144C19.2058 20.8144 20.0564 20.7881 20.5627 20.7294C21.2026 20.6555 21.3221 20.2251 21.3555 19.8586C21.4557 18.764 21.4729 16.2873 21.3535 15.2535C21.2988 14.7837 21.0072 14.4951 20.5515 14.4617H20.5414L15.669 14.4789L15.6427 14.485L15.6447 14.4839ZM19.7111 16.1061V19.086H16.7311V16.1061H19.7111Z" fill="white"/>
                            <path d="M14.5988 3.56449C14.4702 3.58575 14.3153 3.66574 14.0955 3.82269L11.8122 5.93387C11.7262 5.86704 11.5955 5.73034 11.5014 5.63314C11.1713 5.28988 10.7966 4.90005 10.3582 4.896C10.1547 4.89296 9.97444 4.97397 9.81446 5.13395C9.63524 5.31317 9.54613 5.51062 9.55018 5.72123C9.55727 6.11815 9.89141 6.43002 10.1597 6.68113C10.1992 6.7186 10.2377 6.75404 10.2731 6.78846C10.5303 7.03856 11.3961 7.85772 11.7231 7.90227C11.7464 7.90531 11.7697 7.90734 11.794 7.90734C12.1342 7.90734 12.5109 7.59142 12.8977 7.23702C12.9382 7.19956 12.9757 7.16513 13.0081 7.13678C13.4242 6.77024 13.8282 6.37635 14.2191 5.99462C14.5856 5.6382 14.9633 5.26963 15.3481 4.92739L15.3734 4.90511L15.3916 4.87676C15.582 4.58413 15.5799 4.20645 15.3876 3.91281C15.2093 3.64144 14.9147 3.51082 14.5978 3.56348L14.5988 3.56449Z" fill="white"/>
                            <path d="M2.99799 34.7147C2.55146 34.7947 2.32363 35.2028 2.32971 35.5642C2.33578 35.9682 2.6031 36.2781 2.99394 36.3358C3.05166 36.3439 3.10735 36.349 3.16203 36.349C3.45769 36.349 3.70172 36.2254 3.8455 35.9966C4.02067 35.7192 4.00954 35.3283 3.81918 35.0458C3.63894 34.7795 3.33315 34.656 2.99799 34.7157V34.7147Z" fill="white"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-500 stat-heading">Received</p>
                        <p class="text-gray-800 stat-number mt-1">42</p>
                        <div class="flex items-center text-increase mt-1">
                            <svg class="mr-1" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 17L10 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M4.1665 10.0001L9.99984 4.16675L15.8332 10.0001" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <span class="stat-change-text"><span class="stat-change-percentage">16%</span><span class="stat-change-period"> this month</span></span>
                        </div>
                    </div>
                </div>

                <!-- Stat Card: Shipped -->
                <div class="flex items-center space-x-3 p-3">
                    <div class="icon-gradient w-[64px] h-[64px] rounded-full flex items-center justify-center flex-shrink-0">
                        <svg width="35" viewBox="0 0 42 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M41.4657 13.1496L41.4452 13.1033C41.0154 12.3308 40.4982 11.7997 39.8648 11.4776C39.7355 11.4119 39.5631 11.3569 39.3811 11.2977C39.2184 11.246 38.9555 11.1609 38.865 11.0984L37.8857 7.23293C38.0247 7.14459 38.1389 7.01531 38.2208 6.8494C38.544 6.19331 38.3167 5.09875 38.1551 4.67213C37.736 3.56141 36.7588 2.8633 35.4757 2.75557C34.6236 2.68447 33.7186 2.71571 32.8428 2.7448C32.1522 2.7685 31.4412 2.7922 30.7646 2.76634V1.28825C30.7646 0.855168 30.0536 0.126896 29.5936 0.0881122H29.5774C24.4515 -0.0206976 19.2265 -0.00453777 14.1738 0.0116221C10.944 0.021318 7.60535 0.0320913 4.32489 0.00946745H4.31951H4.31412C3.4835 0.0396326 2.77247 0.752822 2.7283 1.5996L2.72507 13.3069V13.3252C2.74984 13.6947 2.94161 14.0093 3.23895 14.1687C3.51259 14.3153 3.83794 14.3034 4.1299 14.1354C4.21177 14.089 4.55652 13.7766 4.55652 13.5482V1.84092H28.9364V13.4663C28.9364 13.7551 29.3468 14.1763 29.614 14.2334C29.9577 14.3066 30.2367 14.2517 30.4425 14.0718C30.742 13.8089 30.7969 13.3511 30.7818 12.8889H38.5203C38.7056 12.8889 39.1009 13.0936 39.4425 13.4351C39.5782 13.5708 39.6719 13.6958 39.7323 13.8014H37.9557C37.611 13.8014 37.2921 14.2926 37.2512 14.5577C37.1607 15.1394 37.1715 16.6089 37.5162 17.2284C37.7338 17.6194 38.5461 18.3725 39.0848 18.3725H39.9844V20.7372H38.7508C38.1949 19.257 36.8741 18.2163 35.2592 17.9997C33.5732 17.7746 31.9572 18.5018 31.0436 19.898C30.9488 20.0423 30.8691 20.233 30.7915 20.4172C30.7754 20.4549 30.7592 20.4948 30.742 20.5325C30.6795 19.8441 30.7161 19.0727 30.7517 18.3251C30.7905 17.5031 30.8303 16.6531 30.7463 15.8742L30.742 15.8451C30.645 15.4055 30.283 15.1545 29.8176 15.2051C29.3942 15.2515 28.9375 15.5563 28.9375 15.9668V20.7372H16.044C15.3298 19.0189 13.6998 17.934 11.8446 17.9631C10.0358 17.9889 8.53616 19.0469 7.88869 20.7372H4.5576V19.7439H7.39312C7.64521 19.7439 7.93932 19.244 7.94255 19.2386C8.05675 18.9769 8.05028 18.7011 7.92531 18.4619C7.78634 18.1979 7.50947 18.0019 7.18411 17.9394L7.15287 17.9329H7.12163C6.25977 17.9696 5.33866 17.9383 4.44663 17.9071C3.35207 17.8694 2.2198 17.8295 1.15971 17.9125C0.814969 17.9394 0.293543 17.9803 0.0705372 18.5028C-0.0986028 18.8971 0.0371401 19.4832 0.470225 19.6793C0.780494 19.8193 1.34394 19.7848 1.94077 19.7482C2.22196 19.731 2.51068 19.7137 2.72938 19.7202V21.1283C2.72938 21.4105 3.14738 22.0052 3.30467 22.141C3.92952 22.6785 5.22769 22.6182 6.37181 22.5643C6.82106 22.5439 7.25091 22.5234 7.5838 22.5428C7.82081 25.3309 9.955 26.6237 11.8877 26.642C11.9017 26.642 11.9168 26.642 11.9308 26.642C13.8635 26.642 16.0053 25.3826 16.3015 22.6074C19.2275 22.546 22.2193 22.5557 25.114 22.5654C26.8248 22.5708 28.5906 22.5773 30.3283 22.5676C30.6009 25.3643 32.7523 26.6409 34.6925 26.6409H34.6958C36.6403 26.6399 38.7971 25.3546 39.0557 22.5439C39.2561 22.5363 39.4791 22.5514 39.7118 22.5676C40.4595 22.6182 41.3062 22.6764 41.7716 21.9589L41.8147 21.8921V14.1881L41.4689 13.1485L41.4657 13.1496ZM39.9833 15.6307V16.5658C39.5685 16.5906 39.3143 16.5443 39.1925 16.4225C39.0708 16.3008 39.0234 16.0465 39.0492 15.6318H39.9844L39.9833 15.6307ZM36.9301 11.0607H30.7646V7.40638H36.0877L36.9312 11.0607H36.9301ZM30.7635 5.49628V4.58379H35.5339C35.744 4.58379 36.0435 4.76909 36.2622 5.03519C36.3882 5.18817 36.4744 5.35084 36.5089 5.49736H30.7635V5.49628ZM37.179 22.2896C37.193 23.5113 36.4313 24.8353 34.7259 24.8569C33.7757 24.8731 33.0119 24.4658 32.5702 23.7214C32.0833 22.9005 32.0714 21.7908 32.539 20.9591C32.9623 20.2061 33.7176 19.7859 34.6634 19.7751C34.6753 19.7751 34.6871 19.7751 34.6979 19.7751C36.3818 19.7751 37.1639 21.0744 37.1779 22.2896H37.179ZM12.0569 24.8547C11.0991 24.9 10.3191 24.5208 9.85804 23.7871C9.34092 22.9651 9.30537 21.8361 9.76969 20.9753C10.1802 20.2147 10.9203 19.7848 11.8543 19.7655C11.8769 19.7655 11.8985 19.7655 11.9211 19.7655C13.5813 19.7655 14.3796 21.0302 14.4194 22.2207C14.4604 23.4337 13.7386 24.7761 12.0579 24.8547H12.0569Z" fill="white"/>
                            <path d="M22.0274 6.24391L21.9519 6.26007L16.0881 11.9957L13.1427 9.13437L13.0996 9.11498C12.6299 8.90382 12.1601 8.98031 11.9005 9.30997C11.6269 9.65795 11.6721 10.1686 12.0147 10.6092C12.5006 11.233 13.161 11.8309 13.7998 12.4094C14.3708 12.9266 14.9612 13.462 15.4094 14.0006L15.4341 14.0276C15.6054 14.1849 15.8252 14.2667 16.0557 14.2667C16.1667 14.2667 16.2798 14.2484 16.3919 14.2096L16.4501 14.1892L22.9776 7.72631L22.998 7.70584L23.0142 7.68214C23.2426 7.33308 23.248 6.91939 23.0293 6.60373C22.8138 6.29239 22.4292 6.15449 22.0263 6.24283L22.0274 6.24391Z" fill="white"/>
                            <path d="M17.3616 17.9384C16.7691 18.045 16.5127 18.5115 16.5256 18.8994C16.5375 19.2732 16.7993 19.6794 17.3584 19.744L27.2698 19.7483L27.3053 19.7386C27.789 19.6039 28.0681 19.229 28.0164 18.7852C27.9679 18.3704 27.6016 17.9384 26.9864 17.9158L17.409 17.9352L17.3616 17.9395V17.9384Z" fill="white"/>
                            <path d="M2.19707 17.002L2.22831 17.0042H10.6185L10.6498 17.002C11.1346 16.9449 11.4739 16.5818 11.4739 16.1186C11.4739 15.7146 11.1906 15.247 10.57 15.1738L10.5539 15.1716L2.12273 15.191L2.08071 15.205C1.611 15.3634 1.31474 15.7879 1.36214 16.2371C1.40523 16.6486 1.73274 16.9492 2.19707 17.002Z" fill="white"/>
                            <path d="M34.2949 20.7609C33.599 20.8902 33.1174 21.4849 33.0959 22.2433C33.0775 22.9037 33.4481 23.6643 34.3165 23.8744C34.4673 23.911 34.6149 23.9293 34.756 23.9293C35.2408 23.9293 35.6599 23.7193 35.9432 23.3217C36.344 22.7615 36.3752 21.9471 36.0176 21.3836C35.6771 20.8482 35.0491 20.6209 34.2938 20.7609H34.2949Z" fill="white"/>
                            <path d="M10.8017 21.1822C10.2663 21.7047 10.0315 22.6258 10.7802 23.4133C11.1077 23.7581 11.4998 23.938 11.9103 23.938C12.0277 23.938 12.1473 23.9229 12.2669 23.8938C12.8379 23.7505 13.3302 23.2625 13.4918 22.6786C13.6426 22.1346 13.4918 21.584 13.076 21.1693C12.3434 20.4367 11.3781 20.622 10.8028 21.1833L10.8017 21.1822Z" fill="white"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-500 stat-heading">Shipped</p>
                        <p class="text-gray-800 stat-number mt-1">25</p>
                        <div class="flex items-center text-decrease mt-1">
                            <svg class="mr-1" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 3L10 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.8335 9.99992L10.0002 15.8333L4.16683 9.99992" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <span class="stat-change-text"><span class="stat-change-percentage">6%</span><span class="stat-change-period"> this month</span></span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- Advance Search Accordion -->
    <div class="mt-6 mb-8 bg-white rounded-xl p-4 ">
        <button id="accordion-button" class="w-full flex justify-between items-center mb-2">
            <h2 class="text-xl font-bold text-gray-900">Advance Search</h2>
            <svg id="accordion-icon" class="w-6 h-6 transition-transform transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
        </button>

        <div id="accordion-content" class="accordion-content hidden">
            <!-- Responsive Grid container -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6 items-end">
                <form method="GET" class="contents">
                <!-- Orders From/Till -->
                <div class="col-span-1 sm:col-span-2 md:col-span-3 lg:col-span-2 flex items-end gap-2">
                    <div class="w-1/2">
                        <label for="order-from" class="block text-sm font-medium text-gray-600 mb-1">Order From</label>
                        <input type="date" value="<?= htmlspecialchars($_GET['order_from'] ?? '') ?>" name="order_from" id="order-from" class="w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                    </div>
                    <span class="text-gray-500 pb-2">→</span>
                    <div class="w-1/2">
                        <label for="order-till" class="block text-sm font-medium text-gray-600 mb-1">Order To</label>
                        <input type="date" value="<?= htmlspecialchars($_GET['order_till'] ?? '') ?>" name="order_till" id="order-till" class="w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                    </div>
                </div>

                <!-- PO Date -->
                <!-- <div>
                    <label for="order-date" class="block text-sm font-medium text-gray-600 mb-1">Order Date</label>
                    <input type="text" name="order_date" id="order-date" placeholder="Order Date" onfocus="(this.type='date')" onblur="(this.type='text')" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                </div> -->

                <!-- Receipt Date -->
                <!-- <div>
                    <label for="receipt-date" class="block text-sm font-medium text-gray-600 mb-1">Receipt Date</label>
                    <input type="text" name="receipt_date" id="receipt-date" placeholder="Receipt Date" onfocus="(this.type='date')" onblur="(this.type='text')" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                </div> -->

                <!-- Order Number -->
                <div>
                    <label for="order-number" class="block text-sm font-medium text-gray-600 mb-1">Order No</label>
                    <input type="text" value="<?= htmlspecialchars($_GET['order_number'] ?? '') ?>" name="order_number" id="order-number" placeholder="Order Number" class="w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                </div>

                <!-- Status -->
                <!-- <div>
                    <label for="status" class="block text-sm font-medium text-gray-600 mb-1">Status</label>
                    <select id="status" name="status" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500 bg-white">
                        <option value="" disabled selected>Status</option>
                        <option>Pending</option>
                        <option>In Progress</option>
                        <option>Completed</option>
                        <option>Disputed</option>
                        <option>Returned</option>
                    </select>
                </div> -->

                <!-- Min/Max Amount -->
                <!-- <div class="col-span-1 sm:col-span-2 md:col-span-1 lg:col-span-2 flex items-end gap-2">
                    <div class="w-1/2">
                        <label for="min-amount" class="block text-sm font-medium text-gray-600 mb-1">Min Amount</label>
                        <input type="number" value="<?= htmlspecialchars($_GET['min_amount'] ?? '') ?>" name="min_amount" id="min-amount" placeholder="Min Amount" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                    </div>
                    <div class="w-1/2">
                        <label for="max-amount" class="block text-sm font-medium text-gray-600 mb-1">Max Amount</label>
                        <input type="number" value="<?= htmlspecialchars($_GET['max_amount'] ?? '') ?>" name="max_amount" id="max-amount" placeholder="Max Amount" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                    </div>
                </div> -->

                <!-- Item Code -->
                <div>
                    <label for="item-code" class="block text-sm font-medium text-gray-600 mb-1">Item No</label>
                    <input type="text" value="<?= htmlspecialchars($_GET['item_code'] ?? '') ?>" name="item_code" id="item-code" placeholder="Item Code" class="w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                </div>
                <!-- PO No -->
                <div>
                    <label for="po-no" class="block text-sm font-medium text-gray-600 mb-1">PO No</label>
                    <input type="text" value="<?= htmlspecialchars($_GET['po_no'] ?? '') ?>" name="po_no" id="po-no" placeholder="PO No" class="w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                </div>

                <!-- Item Name -->
                <div>
                    <label for="item-name" class="block text-sm font-medium text-gray-600 mb-1">Item Name</label>
                    <input type="text" value="<?= htmlspecialchars($_GET['item_name'] ?? '') ?>" name="item_name" id="item-name" placeholder="Item Name" class="w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500">
                </div>
                
                <!-- <div class="">
                    <select id="country" class="max-w-48 px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500 bg-white"
                        onchange="location.href='?page=orders&action=list&country=' + this.value;">                        
                        <option value="" selected >All Country</option>
                        <?php //foreach ($country_list as $key => $value): ?>
                            <option value="<?php //echo $key; ?>" <?php //echo (isset($_GET['country']) && $_GET['country'] === $key) ? 'selected' : ''; ?>><?php //echo $value; ?></option>
                        <?php //endforeach; ?>                    
                    </select>
                </div>
                <div class="">
                    <select id="category" class="px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500 bg-white"
                        onchange="location.href='?page=orders&action=list&category=' + this.value;">
                        
                        <option value="all" selected >All Categories</option>
                        <?php //foreach (getCategories() as $key => $value): ?>
                            <option value="<?php //echo $key; ?>" <?php //echo (isset($_GET['category']) && $_GET['category'] === $key) ? 'selected' : ''; ?>><?php //echo $value; ?></option>
                        <?php //endforeach; ?>                    
                    </select>
                </div> -->
                <!-- Buttons -->
                <div class="col-span-1 sm:col-span-2 md:col-span-1 flex items-center gap-2">
                    <button type="submit" class="w-full bg-amber-600 text-white font-semibold py-2 px-2 rounded-md shadow-sm hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition duration-150">Search</button>
                    <button type="button" id="clear-button" onclick="clearFilters()" class="w-full bg-gray-800 text-white font-semibold py-2 px-2 rounded-md shadow-sm hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-700 transition duration-150">Clear</button>
                </div>
                </form>
            <!-- clear filter -->
             <script>
                function clearFilters() {
                    const url = new URL(window.location.href);
                    //alert(url.search);
                    url.search = ''; // Clear all query parameters
                    const page = 'page=orders&action=list';
                    window.location.href = url.toString() + '?' + page; // Redirect to the updated URL
                }
            </script>
            </div>
        </div>
    </div>
    
    <!-- End of Advance Search Accordion -->

    <!-- Orders Table Section -->
    <div class="mt-5">
        <form action="<?php echo base_url('?page=purchase_orders&action=create'); ?>" method="post">
            <button type="submit" onclick="checkPoItmes()" class="btn btn-success">Create PO</button>
            <!-- button refresh-->
            <span onclick="callImport()" title="Click to import" class="menu-button float-right text-orange-500 hover:bg-orange-200 font-semibold mr-2 cursor-pointer ">
                <!-- <img src="<?php //echo base_url('images/refresh2.jpg'); ?>" alt="Refresh" class="h-8 inline-block " /> -->
            <i class="fas fa-sync-alt p-1 bg-white border border-orange-500"></i>
            </span>

            <!-- Tabs -->
            <div class="relative border-b-[4px] border-white">
                <div id="tabsContainer" class="flex space-x-8" aria-label="Tabs">
                    <a href="<?php echo base_url('?page=orders&action=list&status=all'); ?>" class="tab <?php echo (isset($_GET['status']) && $_GET['status'] === 'all') ? 'tab-active' : ''; echo (!isset($_GET['status'])) ? 'tab-active' : ''; ?> text-center relative py-4">
                        <span class="px-1 text-sm">All Orders</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a>
                    <a href="<?php echo base_url('?page=orders&action=list&status=pending'); ?>" class="tab <?php echo (isset($_GET['status']) && $_GET['status'] === 'pending') ? 'tab-active' : ''; ?> text-gray-500 hover:text-gray-700 text-center relative py-4">
                        <span class="px-1 text-sm">Pending</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a>
                    <a href="<?php echo base_url('?page=orders&action=list&status=processed'); ?>" class="tab <?php echo (isset($_GET['status']) && $_GET['status'] === 'processed') ? 'tab-active' : ''; ?> text-gray-500 hover:text-gray-700 text-center relative py-4">
                        <span class="px-1 text-sm">Processed</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a>
                    <a href="<?php echo base_url('?page=orders&action=list&status=dispatch'); ?>" class="tab text-gray-500 hover:text-gray-700 text-center relative py-4">
                        <span class="px-1 text-sm">Dispatch</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a>
                    <a href="<?php echo base_url('?page=orders&action=list&status=shipped'); ?>" class="tab text-gray-500 hover:text-gray-700 text-center relative py-4">
                        <span class="px-1 text-sm">Shipped</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a>
                    <!--
                    <a href="#" class="tab text-gray-500 hover:text-gray-700 text-center relative py-4">
                        <span class="px-1 text-sm">Received</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a>
                    <a href="#" class="tab text-gray-500 hover:text-gray-700 text-center relative py-4">
                        <span class="px-1 text-sm">Disputed</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a>
                    <a href="#" class="tab text-gray-500 hover:text-gray-700 text-center relative py-4">
                        <span class="px-1 text-sm">Returned</span>
                        <div class="underline-pill w-full absolute left-0 bottom-[-4px]"></div>
                    </a> -->
                </div>
                <!-- <div class="right-0 top-0 absolute p-4 size">
                    <select id="category" class="px-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500 bg-white"
                        onchange="location.href='?page=orders&action=list&category=' + this.value;">
                        
                        <option value="all" selected >All Categories</option>
                        <?php // (getCategories() as $key => $value): ?>
                            <option value="<?php //echo $key; ?>" <?php //echo (isset($_GET['category']) && $_GET['category'] === $key) ? 'selected' : ''; ?>><?php //echo $value; ?></option>
                        <?php //endforeach; ?>                    
                    </select>
                </div> -->
            </div>

            <!-- Table h-96 overflow-y-scroll-->
            <div class="overflow-x-auto mt-4 ">
                <?php /*?>
                <table class="min-w-full table-spacing ">
                    <thead class="bg-gray-50 rounded-md ">
                    <tr class="text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky">
                        <th class="p-4">#</th>
                        <th class="px-2 py-3">Order ID</th>
                        <th class="px-2 py-3">Order Date</th>                   
                        <th class="px-2 py-3">Item Code</th>
                        
                        <!-- <th class="px-12 py-3">Item</th> -->
                        <th class="px-2 py-3">Image</th>
                        <th class="px-2 py-3">Marketplace</th>
                        <!-- <th class="px-6 py-3">Status</th> -->
                        <th class="px-2 py-3">PO Number</th>
                        <th class="px-2 py-3">PO Due Date</th>
                        <!-- <th class="px-6 py-3">Staff</th> -->
                        <!-- <th class="px-2 py-3">Amount</th> -->
                        <th class="px-2 py-3">Unit</th>
                        <!-- <th class="px-6 py-3">Location</th> -->
                        <!-- <th class="relative px-6 py-3"><span class="sr-only">Actions</span></th> -->
                    </tr>
                    </thead>
                    <tbody>
                    <!-- Table Row 1 -->
                    <?php 
                        if (!empty($data['orders'])) {
                            foreach ($data['orders'] as $order) { 
                        ?> 
                    <tr class="bg-white rounded-md shadow-sm" data-id="<?= $order['id'] ?>">
                        <td class="p-4 whitespace-nowrap rounded-l-md">
                            <?php if($order['status']=='pending'): ?>
                                <input type="checkbox" name="poitem[]" value="<?=$order['id']?>" class="h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500">  
                            <?php endif; ?>                    
                        </td>
                        <td class="p-4 whitespace-nowrap rounded-l-md">                        
                            <a href="#" class="order-detail-link text-blue-600 hover:underline" 
                                data-order='<?= htmlspecialchars(json_encode($order), ENT_QUOTES, 'UTF-8') ?>'>
                                <?= $order['order_number'] ?>
                            </a>
                        </td>
                        <td class="px-2 py-4 whitespace-nowrap text-sm font-medium text-amber-600"><?= date('d/m/y', strtotime($order['order_date'])) ?></td>
                        <td class="px-2 py-4 whitespace-nowrap text-sm text-gray-500"><a href="http://exoticindiaart.com/book/details/<?= $order['item_code'] ?>" target="_blank" class="icon-link text-blue-600 hover:underline"><?= $order['item_code'] ?></a></td>
                        
                    
                        <!-- <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Swati Nagar</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                            <a href="#" class="icon-link">
                                <span>Kuber</span>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.0462 8.20171C10.6471 9.47037 9.33805 11.0991 7.90051 12.3041C7.56557 12.5845 7.25392 12.7388 6.81226 12.7978C6.09737 12.8939 5.0914 12.9659 4.3672 12.9883C3.50483 13.0154 2.73561 12.5712 2.75424 11.6359C2.7686 10.909 2.86756 9.93098 2.95139 9.19835C2.99176 8.84595 3.04959 8.53545 3.24558 8.2299L11.1583 0.415632C11.9224 -0.178697 12.8027 -0.120026 13.5276 0.491828C14.0919 0.968052 15.0964 1.93688 15.5629 2.49426C16.1481 3.19335 16.1419 4.07837 15.5629 4.77785C14.5837 5.96041 13.1027 7.05649 12.0459 8.20209L12.0462 8.20171ZM12.257 1.03396C12.1433 1.04272 11.9911 1.11244 11.8968 1.17873C11.5141 1.44732 11.1361 2.00355 10.7523 2.30224L13.6763 5.13787C14.0908 4.59726 15.3762 3.97665 14.7692 3.19678C14.239 2.51559 13.299 1.87897 12.7316 1.19664C12.6109 1.0972 12.4157 1.02139 12.2566 1.03396H12.257ZM3.89255 11.8744C3.93796 11.9216 4.0998 11.9635 4.17121 11.962C4.89619 11.9464 5.93204 11.858 6.65663 11.7692C6.78664 11.7532 6.92675 11.7174 7.03891 11.6492L12.869 5.94022L9.99472 3.04591L4.13628 8.79985C4.00626 8.99529 3.98492 9.58505 3.96008 9.84602C3.91506 10.323 3.85607 10.8968 3.84171 11.368C3.83821 11.4842 3.81997 11.7989 3.89216 11.8744H3.89255Z" fill="#D06706"/><path d="M2.04958 2.33194C3.16732 2.2085 4.46941 2.40014 5.60695 2.32394C6.18289 2.447 6.14176 3.26687 5.56736 3.34687C4.59787 3.48174 3.31946 3.26344 2.30922 3.34878C1.6281 3.4063 1.1127 3.92444 1.04788 4.58696V13.695C1.10687 14.4322 1.64634 14.9138 2.38684 14.9713H11.5488C13.652 14.8079 12.6526 11.8801 12.8886 10.5337C13.0523 9.99611 13.7703 9.99839 13.9326 10.5337C13.8247 12.6089 14.6599 15.6335 11.7045 16.0003H2.2316C1.06845 15.9165 0.137389 15.0174 0 13.8859L0.00620967 4.36409C0.140494 3.35906 1.00791 2.447 2.04997 2.33194H2.04958Z" fill="#D06706"/></svg>
                            </a>
                        </td> -->
                        <!-- <td class="px-6 py-4 text-sm text-gray-500 max-w-xs"><?= $order['title'] ?></td> -->
                        <td class="px-2 py-1">
                            <img 
                                class="h-28 max-w-[100px] w-full mx-auto rounded-md object-cover cursor-pointer" 
                                src="<?= $order['image'] ?>" 
                                alt="" 
                                onclick="openImagePopup('<?= $order['image'] ?>')"
                            >
                        </td>
                        <td class="px-2 py-4 text-sm text-gray-500 whitespace-normal">
                            <?php 
                            echo wordwrap($order['marketplace_vendor'], 15, "<br>\n", true);
                            ?>
                        </td>
                        <!-- <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                            <a href="#" class="icon-link">
                                <span><?= ucfirst($order['status']) ?></span>                  
                            </a>
                        </td> -->
                        <td class="px-2 py-4 text-sm text-gray-500 whitespace-normal ">
                            <a href="<?php echo base_url('?page=purchase_orders&action=view&po_id=' . $order['po_id']); ?>" class="icon-link text-blue-600 hover:underline">
                                <span><?php echo $order['po_number']; ?></span>

                            </a>
                        </td>
                        <td class="px-2 py-4 whitespace-nowrap text-sm text-gray-500"><?php 
                        if ($order['delivery_due_date']) {
                            $days = ceil((strtotime($order['delivery_due_date']) - time()) / (60 * 60 * 24));
                            echo date('d/m/Y', strtotime($order['delivery_due_date'])) . ' <br>' . $days . ' Days Remaining';
                        } else {
                            echo '-';
                        }
                        ?>
                        
                        </td>
                        <!--<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mukul</td> -->
                        <!-- <td class="px-2 py-4 whitespace-nowrap text-sm text-gray-500">
                            <?= isset($order['total_price']) ? '₹' . $order['total_price'] : '-' ?>
                        </td> -->

                        <td class="px-2 py-4 whitespace-nowrap text-sm text-gray-500"><?= $order['quantity'] ?? '-' ?></td>
                        <!-- <td class="px-6 py-4 text-sm text-gray-500 max-w-xs"><?= $order['shipping_address'] ?></td> -->
                        <!-- <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium rounded-r-md">
                            <a href="#" class="text-gray-500 hover:text-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z" /></svg>
                            </a>
                        </td> -->
                    </tr>
                    <?php
                            }
                        } else {
                            echo "<tr><td colspan='10' class='text-center'>No orders found.</td></tr>";
                        }
                        ?>
                    </tbody>
                </table>
                <?php */?>

                    
                    <?php 
                    if (!empty($data['orders'])) {
                        foreach ($data['orders'] as $order) {
                    ?>
                    <div class="max-w-7xl mx-auto bg-white rounded-lg shadow-md border border-gray-200" style="margin: 0px 0px 10px 0px">
                        <div class="flex items-start p-4 gap-4">
                            <!-- Checkbox -->
                            <div class="flex-shrink-0 pt-1">
                                <?php if($order['status']=='pending'): ?>
                                <input type="checkbox" name="poitem[]" value="<?=$order['order_id']?>" class="custom-checkbox" >
                                <?php endif; ?>
                            </div>

                            <!-- Main two-column layout -->
                            <div class="grid grid-cols-[max-content,1fr] gap-x-4 w-full">

                                <!-- COLUMN 1 -->
                                <div class="flex flex-col gap-4">
                                    <!-- Col 1, Row 1: Image and Title -->
                                    <div class="flex items-start gap-4 ">
                                        <img src="<?= $order['image'] ?>" onclick="openImagePopup('<?= $order['image'] ?>')" alt="Product Image" class="h-24 rounded-md object-cover flex-shrink-0 cursor-pointer">
                                        <div class="pt-1 w-full max-w-xs">
                                            <h2 class="product-title mb-1 w-[300px]"><?= $order['title'] ?></h2>
                                            <p class="item-code">Item Code: <a href="http://exoticindiaart.com/book/details/<?= $order['item_code'] ?>" target="_blank" class="icon-link text-blue-600 hover:underline"><?= $order['item_code'] ?></a></p>
                                            <p class="quantity">Quantity: <?= $order['quantity'] ?></p>
                                        </div>
                                    </div>
                                    <!-- Col 1, Row 2: Order Details -->
                                    <div class=""> <!-- Left padding to align under title (w-24 + gap-4 = 6rem + 1rem) -->
                                        <div class="grid grid-cols-[max-content,1fr] items-center gap-x-2 pt-1">
                                            <span class="heading-typography ">Order Date</span>
                                            <p class="">: <span class="data-typography"><?= date("d M Y", strtotime($order['order_date'])) ?></span></p>

                                            <span class="heading-typography ">Order ID</span>
                                            <p class="">: <span class="data-typography"><a href="#" id="order-id-<?= $order['order_id'] ?>" class="order-detail-link text-blue-600 hover:underline" data-order='<?= htmlspecialchars(json_encode($order), ENT_QUOTES, 'UTF-8') ?>'><?= $order['order_number'] ?></a></span></p>

                                            <span class="heading-typography">Vendor Name</span>
                                            <p>: <span class="data-typography"><?= $order['vendor'] ?></span></p>
                                            <span class="heading-typography">Marketplace</span>
                                            <p>: <span class="data-typography"><?= $order['marketplace_vendor'] ?></span></p>
                                            <span class="heading-typography">Staff Name</span>
                                            <p>: <span class="data-typography"><?= $order['staff_name'] ?? 'N/A' ?></span></p>
                                        </div>
                                    </div>
                                </div>

                                <!-- COLUMN 2 -->
                                <div class="flex flex-col gap-4">
                                    <!-- Col 2, Row 1: Status Grid and Actions -->
                                    <div class="flex items-start justify-between gap-4">
                                        <div class="flex-grow">
                                            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 items-start text-center md:text-left">
                                                <div class="">
                                                    <span class="heading-typography block mb-5">Addon</span>
                                                    <?php
                                                    $options = $order['options'] ?? '';
                                                    $optionsArr = [];

                                                    if (is_string($options)) {
                                                        $decoded = json_decode($options, true);
                                                        if (json_last_error() === JSON_ERROR_NONE && $decoded !== null) {
                                                            $optionsArr = $decoded;
                                                        } else {
                                                            // fallback: comma separated string
                                                            $optionsArr = array_filter(array_map('trim', explode(',', $options)));
                                                        }
                                                    } elseif (is_array($options)) {
                                                        $optionsArr = $options;
                                                    }

                                                    if (!empty($optionsArr)) {
                                                        foreach ($optionsArr as $opt) {
                                                            echo '<span class="inline-block bg-gray-100 text-sm px-2 py-1 rounded mr-2 mb-2">' . htmlspecialchars($opt) . '</span>';
                                                        }
                                                    } else {
                                                        echo '<span class="data-typography mt-1 block">N/A</span>';
                                                    }
                                                    ?>
                                                </div>
                                                <div>
                                                    <span class="heading-typography block mb-5">Local Stock</span>
                                                    <span class="data-typography mt-1 block font-semibold"><?= $order['local_stock'] ?? 'N/A' ?></span>
                                                </div>
                                                <div>
                                                    <span class="heading-typography block mb-5">Location</span>
                                                    <span class="data-typography mt-1 block"><?= $order['location'] ?: 'N/A' ?></span>
                                                </div>
                                                <div>
                                                    <span class="heading-typography block mb-5">ESD</span>
                                                    <span class="data-typography mt-1 block"><?= $order['esd'] ? date("d M Y", strtotime($order['esd'])) : 'N/A' ?></span>
                                                </div>                                                
                                                
                                                <div>
                                                    <span class="heading-typography block mb-5">Status</span>
                                                    <span class="data-typography mt-1 block font-semibold"><?= isset($status_list[$order['status']]) ? $status_list[$order['status']] : $order['status'] ?></span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="w-auto flex flex-col items-center space-y-2">
                                            <span class="text-gray-500 hover:text-gray-800">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                                </svg>
                                            </span>
                                            
                                            <span class="menu-button text-gray-500 hover:text-gray-700 font-semibold" style="position: relative; display: inline-block;" onclick="toggleMenu(<?= $order['order_id'] ?>)">
                                                <i class="fas fa-ellipsis-v"></i> 
                                            </span>
                                            <div id="menu-<?= $order['order_id'] ?>" style="display: none;" class="menu-popup-order">
                                                <a href="#" onclick="openStatusPopup(<?= $order['order_id'] ?>)" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Update status</a>
                                                <a href="<?php //echo base_url('?page=purchase_orders&action=create&order_id=' . $order['order_id']); ?>" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Create PO</a>
                                               
                                            </div>
                                        </div> -->
                                        <div class="w-auto flex flex-col items-center space-y-2">
                                            <span class="text-gray-500 hover:text-gray-800">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                                </svg>
                                            </span>
                                            <span class="menu-button text-gray-500 hover:text-gray-700 font-semibold relative inline-block" onclick="toggleMenu(<?= $order['order_id'] ?>)">
                                                <i class="fas fa-ellipsis-v"></i>
                                                <div id="menu-<?= $order['order_id'] ?>" style="display: none;" class="menu-popup-order absolute right-0 mt-8 z-50 bg-white shadow rounded">
                                                    <a href="#" onclick="openStatusPopup(<?= $order['order_id'] ?>)" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Order Update</a>
                                                    <hr class="my-1 mx-2"></hr>
                                                    <!-- <a href="<?php //echo base_url('?page=purchase_orders&action=create&order_id=' . $order['order_id']); ?>" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Create PO</a> -->
                                                </div>
                                            </span>
                                        </div>
                                    </div>
                                    <!-- Col 2, Row 2: Note and Priority -->
                                    <div class="flex items-start gap-4">
                                        <div class="flex-grow">
                                            <h4 class="note-heading mb-2">Note:</h4>
                                            <div class="note-content bg-[#f3f3f3] p-4 rounded-[5px] w-full max-w-[452px] min-h-[110px]">
                                                <?= isset($order['remarks']) ? $order['remarks'] : '' ?>
                                            </div>
                                        </div>
                                        <div class="w-auto flex flex-col justify-between text-left flex-shrink-0" style="min-height: calc(110px + 2.5rem + 40px);">
                                            <div class="mt-[20px]">
                                                <h4 class="set-priority-title mb-2">Priority</h4>
                                                <span class="bg-red-200"><?= isset($order['priority']) ? $order['priority'] : '' ?></span>
                                            </div>
                                            <div>
                                                <?php /*if (!empty($order['vendor_invoice'])): ?>
                                                    <a href="<?= base_url($order['vendor_invoice']) ?>" target="_blank" class="download-invoice inline-flex items-center hover:text-blue-800 font-semibold">
                                                        <p class="mr-1">Download Invoice</p>
                                                        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M2.62925 10.3889C1.64271 9.68768 1 8.54159 1 7.24672C1 5.47783 2.3 3.84375 4.25 3.52778C4.86168 2.07349 6.30934 1 7.99783 1C10.1607 1 11.9284 2.67737 12.05 4.79167C13.1978 5.29352 14 6.52522 14 7.85887C14 8.98648 13.4266 9.98004 12.5556 10.5634M7.5 14V6.77778M7.5 14L5.33333 11.8333M7.5 14L9.66667 11.8333" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                        </svg>
                                                    </a>
                                                <?php else: ?>
                                                    <span class="text-gray-400">No Invoice</span>
                                                <?php endif; */ ?>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <?php
                        }
                    } else {
                        echo "No orders found.";
                    }
                    ?>

            </div>
        </form>
        <!-- Pagination -->
         <?php
            $page = isset($_GET['page_no']) ? (int)$_GET['page_no'] : 1;
            $page = $page < 1 ? 1 : $page;
            $limit = isset($_GET['limit']) ? (int)$_GET['limit'] : 50; // Orders per page, default 50
            $limit = in_array($limit, [10, 20, 50, 100]) ? $limit : 50; // Only allow specific values
            $total_orders = isset($data['total_orders']) ? (int)$data['total_orders'] : 0;
            $total_pages = $limit > 0 ? ceil($total_orders / $limit) : 1;

            // Prepare query string for pagination links
            $search_params = $_GET;
            unset($search_params['page_no'], $search_params['limit']);
            $query_string = http_build_query($search_params);
            $query_string = $query_string ? '&' . $query_string : '';

            // Calculate start/end slot for 10 pages
            $slot_size = 10;
            $start = max(1, $page - floor($slot_size / 2));
            $end = min($total_pages, $start + $slot_size - 1);
            if ($end - $start < $slot_size - 1) {
                $start = max(1, $end - $slot_size + 1);
            }
            ?>
        <div id="pagination-controls" class="flex justify-center items-center space-x-4 mt-8 bottom-0 border border-[rgba(226,228,230,1)] py-4">
            <div>
                <p class="text-sm text-gray-600">Showing <span class="font-medium"><?= count($orders) ?></span> of <span class="font-medium"><?= $total_orders ?></span> orders</p>
            </div>
            <?php            
            //echo '****************************************  '.$query_string;
            if ($total_pages > 1): ?>          
             <!-- Prev Button -->
                <a class="page-link px-2 py-1 rounded <?php if($page <= 1) echo 'opacity-50 pointer-events-none'; ?>"
                href="?page=orders&action=list&page_no=<?= $page-$slot_size ?>&limit=<?= $limit ?><?= $query_string ?>">
                    &laquo; Prev
                </a>
                <!-- Page Slots -->
                <?php for ($i = $start; $i <= $end; $i++): ?>
                    <a class="page-link px-2 py-1 rounded <?= $i == $page ? 'bg-black text-white font-bold' : 'bg-gray-100 text-gray-700' ?>"
                    href="?page=orders&action=list&page_no=<?= $i ?>&limit=<?= $limit ?><?= $query_string ?>">
                        <?= $i ?>
                    </a>
                <?php endfor; ?>
                <!-- Next Button -->
                <a class="page-link px-2 py-1 rounded <?php if($page >= $total_pages) echo 'opacity-50 pointer-events-none'; ?>"
                href="?page=orders&action=list&page_no=<?= $page+$slot_size ?>&limit=<?= $limit ?><?= $query_string ?>">
                    Next &raquo;
                </a>
            <?php endif; ?>
            <select id="rows-per-page" class="pagination-select bg-transparent border-b border-gray-400 focus:outline-none focus:border-gray-800 text-gray-600"
                onchange="location.href='?page=orders&page_no=1&limit=' + this.value + '<?= $query_string ?>';">
                <?php foreach ([10, 20, 50, 100] as $opt): ?>
                    <option value="<?= $opt ?>" <?= $opt === $limit ? 'selected' : '' ?>>
                        <?= $opt ?>
                    </option>
                <?php endforeach; ?>
            </select>

        </div>

    </div>
</div>
<!-- Order Details Popup Modal -->
<!-- <div class="fixed inset-y-0 right-0 w-[400px] bg-white shadow-lg p-4" id="orderDetailOffcanvas" style="display: none; z-index: 1000;">
  Popup content goes here
  <h2 class="text-xl font-bold mb-4">Order Details</h2>
  <div id="orderDetailOffcanvasBody">
      Order details will be populated here
  </div>
  <button class="mt-4 bg-blue-500 text-white px-4 py-2 rounded">Close</button>
</div> -->
<!-- Right Side Popup Wrapper -->
<div id="popup-wrapper" class="hidden">
    <!-- Background Overlay -->
    <!-- <div id="popup-overlay" class="fixed inset-0 bg-black bg-opacity-25 z-40"></div> -->

    <!-- Sliding Container -->
    <div id="modal-slider" class="popup-transition fixed top-0 right-0 h-full flex transform translate-x-full z-50" style="width: calc(45% + 61px); min-width: 661px;">

        <!-- Close Button -->
        <div class="flex-shrink-0 flex items-start pt-5">
            <button id="close-vendor-popup-btn" class="bg-white text-gray-800 hover:bg-gray-100 transition flex items-center justify-center shadow-lg" style="width: 61px; height: 61px; border-top-left-radius: 8px; border-bottom-left-radius: 8px;">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Popup Panel -->
        <div id="vendor-popup-panel" class="h-full bg-white shadow-2xl" style="width: 100%;">
            <div class="h-full w-full overflow-y-auto">
                <div class="p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-6 border-b">Order Details</h2>

                    <div class="flex items-start mb-6 pb-6 border-b">
                        <img src="https://placehold.co/100x80/e2e8f0/4a5568?text=Item" alt="Product Image" class="rounded-md h-36
                         object-cover">
                        <div class="ml-6 text-sm text-gray-600 space-y-1">
                            <p class="flex w-[400px]"><strong>Order Number:</strong> <span id="order_number"></span> 
                            <form action="<?php echo base_url('?page=purchase_orders&action=create'); ?>" method="post">
                            <input type="hidden" name="poitem[]" id="poitem_order_id">
                            <button type="submit" class="btn btn-success float-right">Create PO</button>
                            </form>
                            </p>
                            <p><strong>Order Date:</strong> <span id="order_date"></span></p>
                            <p><strong>HSN Code:</strong> <span id="hsn"></span></p>
                            <p><strong>Category:</strong> <span id="groupname"></span></p>
                            <p><strong>Quantity:</strong> <span id="quantity"></span></p>
                            <p><strong>Shipping Country:</strong> <span id="shipping_country"></span></p>  
                        </div>
                    </div>

                    <form id="detail-form" enctype="multipart/form-data">
                        <div class="grid grid-cols-2 gap-x-8 gap-y-4 mb-6">
                            <div>
                                <label class="text-sm font-bold text-gray-700 ">Title: </label>
                                <span class="text-gray-600" id="item"></span>
                            </div>                            
                            <div>
                                <label class="text-sm font-bold text-gray-700">Description: </label>
                                <span class="text-gray-600" id="description"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Sub Category: </label>
                                <span class="text-gray-600" id="sub_category"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Size: </label>
                                <span class="text-gray-600" id="size"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Color: </label>
                                <span class="text-gray-600" id="color"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Material: </label>
                                <span class="text-gray-600" id="material"></span>
                            </div>
                            <div>
                                <label for="item_price" class="text-sm font-bold text-gray-700">Item Price: </label>
                                <span class="text-gray-600" id="item_price">₹00</span>
                            </div>
                            <div>
                                <label for="final_price" class="text-sm font-bold text-gray-700">Final Price: </label>
                                <span class="text-gray-600" id="final_price">00</span>
                            </div>
                            <div>
                                <label for="cost_price" class="text-sm font-bold text-gray-700">Cost Price: </label>
                                <span class="text-gray-600" id="cost_price">00</span>
                            </div>
                            <div>
                                <label for="currency" class="text-sm font-bold text-gray-700">Currency: </label>
                                <span class="text-gray-600" id="currency">00</span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">GST: </label>
                                <span class="text-gray-600" id="gst">18%</span>
                            </div>
                            <div>
                                <label for="marketplace" class="text-sm font-bold text-gray-700">Marketplace: </label>
                                <span class="text-gray-600" id="marketplace"></span>
                            </div>
                            <div>
                                <label for="local_stock" class="text-sm font-bold text-gray-700">Local Stock: </label>
                                <span class="text-gray-600" id="local_stock"></span>
                            </div>
                            <div>
                                <label for="location" class="text-sm font-bold text-gray-700">Location: </label>
                                <span class="text-gray-600" id="location"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Order Addons: </label>
                                <span id="order_addons" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Backorder Status: </label>
                                <span id="backorder_status" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Backorder Percentage: </label>
                                <span id="backorder_percent" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Backorder Delay: </label>
                                <span id="backorder_delay" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Sold Quantity (numsold): </label>
                                <span id="numsold" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">PO Number: </label>
                                <span id="po_number" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">PO Date: </label>
                                <span id="po_date" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Expected Delivery Date: </label>
                                <span id="expected_delivery_date" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Product Weight: </label>
                                <span id="product_weight" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Product Weight Unit: </label>
                                <span id="product_weight_unit" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Product Height: </label>
                                <span id="prod_height" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Product Width: </label>
                                <span id="prod_width" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Product Length: </label>
                                <span id="prod_length" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Length Unit: </label>
                                <span id="length_unit" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Payment Type: </label>
                                <span id="payment_type" class="text-gray-600"></span>
                            </div>
                            <div>
                                <label class="text-sm font-bold text-gray-700">Coupon: </label>
                                <span id="coupon" class="text-gray-600"></span>
                            </div>
                            <div> 
                                <label class="text-sm font-bold text-gray-700">Coupon Reduce: </label>
                                <span id="coupon_reduce" class="text-gray-600"></span>
                            </div>
                            <div> 
                                <label class="text-sm font-bold text-gray-700">Gift Voucher: </label>
                                <span id="giftvoucher" class="text-gray-600"></span>
                            </div>
                            <div> 
                                <label class="text-sm font-bold text-gray-700">Gift Voucher Reduce: </label>
                                <span id="giftvoucher_reduce" class="text-gray-600"></span>
                            </div>
                            <div> 
                                <label class="text-sm font-bold text-gray-700">Credit: </label>
                                <span id="credit" class="text-gray-600"></span>
                            </div>
                            <div> 
                                <label class="text-sm font-bold text-gray-700">Vendor: </label>
                                <span id="vendor" class="text-gray-600"></span>
                            </div>
                            
                        </div>

                        
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Image Popup -->
<div id="imagePopup" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50" onclick="closeImagePopup(event)">
    <div class="bg-white p-4 rounded-md max-w-3xl max-h-3xl relative flex flex-col items-center" onclick="event.stopPropagation();">
        <button onclick="closeImagePopup()" class="absolute top-2 right-2 bg-red-500 text-white px-3 py-1 rounded-full text-sm">✕</button>
        <img id="popupImage" class="max-w-full max-h-[80vh] rounded" src="" alt="Image Preview">
    </div>
</div>
<div id="importPopup" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50" onclick="closeImportPopup(event)">
    <div class="bg-white p-4 rounded-md max-w-3xl max-h-3xl relative flex flex-col items-center " onclick="event.stopPropagation();">
        <button onclick="closeImportPopup()" class="absolute top-2 right-2 bg-red-500 text-white px-3 py-1 rounded-full text-sm">✕</button>
        <div class="p-6">
            <h2 class="text-2xl font-bold mb-4">Import Orders</h2>
            <?php //echo date('Y-m-d H:i:s',1761382018);          

            ?>
            <div class="w-full bg-gray-200 rounded-full dark:bg-gray-700 mb-2">
                <div id="importProgress" class="bg-orange-600 text-xs font-medium text-orange-100 text-center p-0.5 leading-none rounded-full" style="width: 0%"> 0%</div>
            </div>
            <form id="importForm" enctype="multipart/form-data" method="post" action="?page=orders&action=import_orders">
                <div class="mb-4 flex">
                    <label for="importType" class="block text-gray-700 font-bold mb-2 ">Import Type:</label>
                    <select id="importType" name="importType" class="border border-gray-300 rounded px-3 py-2 ml-12" onchange="toggleOrderNumberInput()">
                        <option value="all">Import All Orders</option>
                        <option value="specific">Import Specific Order</option>
                    </select>
                </div>
                <div class="mb-4 flex hidden" id="orderNumberDiv">
                    <label for="importOrderId" class="block text-gray-700 font-bold mb-2">Order Number:</label>
                    <input type="text" id="importOrderId" name="importOrderId" class="border border-gray-300 rounded px-3 py-2 ml-8" >
                </div>
                <div class="mb-4" style="max-height:200px; overflow-y:auto;" id="importStatus">
                    <p class="text-gray-700 mb-2">Are you sure you want to import orders from Server?</p>
                </div>
                <div class="flex justify-end space-x-4">
                    <div id="errorMessage" class=""></div>
                    <button type="button" onclick="closeImportPopup()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Import</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--Status Popup -->
<div id="statusPopup" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50" onclick="closeStatusPopup(event)">
    <div class="bg-white p-4 rounded-md max-w-4xl max-h-3xl relative flex flex-col items-center " onclick="event.stopPropagation();">
        <button onclick="closeStatusPopup()" class="absolute top-2 right-2 bg-red-500 text-white px-3 py-1 rounded-full text-sm">✕</button>
        <div class="w-full flex">
            <div class="items-start mb-6 w-[40%]">
                <img src="https://placehold.co/100x80/e2e8f0/4a5568?text=Item" alt="Product Image" class="rounded-md border-2 m-6 h-36
                    object-cover">
                <p class="ml-6 text-sm text-gray-600 space-y-1">
                    <strong>Order Number:</strong> <span id="status_order_number"></span><br>
                    <strong>Item Code:</strong> <span id="status_item_code"></span><br>
                    <strong>Vendor Name:</strong> <span id="status_vendor_name"></span><br><br>
                    <span id="status_category"></span> / 
                    <span id="status_sub_category"></span><br>
                    <span id="status_item" class="font-bold"></span><br>
                </p>
            </div>
            <div class="border-l pl-4 ml-4"></div>
            <div class="p-4 w-[59%]">
                <h2 class="text-2xl font-bold mb-4">Order Update</h2>
                <form id="statusForm" enctype="multipart/form-data" method="post" action="?page=orders&action=update_status">
                    <input type="hidden" name="status_order_id" id="status_order_id">
                    <div class="mb-4">
                        <div class="mb-4 flex space-x-4">
                        <div>
                        <label for="orderStatus" class="block text-gray-700 font-bold mb-2 ">Order Status:</label>
                        <select id="orderStatus" name="orderStatus" class="border border-gray-300 rounded px-3 py-2 w-full">
                            <?php
                            echo '<option value="">-- Order Status --</option>';

                            // Find the "Procurement" parent id (by slug or title, case-insensitive)
                            $procurement_id = null;
                            $sorder_id = null;
                            $parent = [];
                            foreach ($order_status_list as $s) {
                                if ((isset($s['slug']) && strtolower($s['slug']) === 'procurement') ||
                                    (isset($s['title']) && strtolower($s['title']) === 'procurement')) {
                                    $procurement_id = $s['id'] ?? null;
                                    //break;
                                }
                                if($s['parent_id'] === 0 && strtolower($s['slug']) === 'order'){
                                    //$parent[$s['id']] = $s['title'];
                                    $sorder_id = $s['id'] ?? null;
                                }
                            }

                            // Partition statuses into procurement children and others
                            $procurement_children = [];
                            $other_statuses = [];
                            foreach ($order_status_list as $status) {
                                // skip the procurement parent itself from listing
                                if ($procurement_id !== null && isset($status['id']) && $status['id'] == $procurement_id) {
                                    continue;
                                }
                                if($sorder_id !== null &&  $status['id'] == $sorder_id){
                                    continue;
                                }
                                if ($procurement_id !== null && isset($status['parent_id']) && $status['parent_id'] == $procurement_id) {
                                    $procurement_children[] = $status;
                                } else {
                                    $other_statuses[] = $status;
                                }
                            }
                            // Output remaining statuses
                            if (!empty($other_statuses)) {
                                echo '<optgroup label="Order">';
                                foreach ($other_statuses as $st) {
                                    $value = htmlspecialchars($st['slug'] ?? '');
                                    $label = htmlspecialchars($st['title'] ?? $st['slug'] ?? '');
                                    echo "<option value=\"{$value}\">{$label}</option>";
                                }
                            }
                            // Output optgroup for Procurement (if any)
                            if (!empty($procurement_children)) {
                                echo '<optgroup label="Procurement">';
                                foreach ($procurement_children as $st) {
                                    $value = htmlspecialchars($st['slug'] ?? '');
                                    $label = htmlspecialchars($st['title'] ?? $st['slug'] ?? '');
                                    echo "<option value=\"{$value}\">{$label}</option>";
                                }
                                echo '</optgroup>';
                            }                           
                            ?>
                            
                        </select>
                        </div>
                        <div>
                            <label for="statusESD" class="block text-gray-700 font-bold mb-2">ESD:</label>
                            <input type="date" id="statusESD" name="esd" class="border border-gray-300 rounded px-2 py-1.5 w-full">
                        </div>
                        <div style="min-width: 100px;">
                        <label for="orderPriority" class="block text-gray-700 font-bold mb-2 ">Priority:</label>
                        <select id="orderPriority" name="orderPriority" class="border border-gray-300 rounded px-3 py-2 w-full">
                            <option value="" >-Select-</option>
                            <option value="medium" selected>Medium</option>
                            <option value="critical" >Critical</option>
                            <option value="urgent" >Urgent</option>
                            <option value="high" >High</option>                            
                            <option value="low" >Low</option>
                        </select>
                        </div>
                        </div>
                        <!-- Remarks field -->
                        <div class="mb-4">
                            <label for="orderRemarks" class="block text-gray-700 font-bold mb-2">Notes:</label>
                            <textarea id="orderRemarks" name="orderRemarks" class="border border-gray-300 rounded px-3 py-2 w-full" rows="4"></textarea>
                        </div>  
                        <div id="orderStatusError" class="text-red-500 text-sm mt-1 hidden">Please select a status.</div>
                    </div>
                    <div class="flex justify-end space-x-4">
                        <button type="button" onclick="closeStatusPopup()" class="px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-600">Cancel</button>
                        <button type="submit" class="px-4 py-2 btn-success text-white rounded hover:bg-blue-700">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
function closeImagePopup(e) {
    // If called from button or outside click
    document.getElementById('imagePopup').classList.add('hidden');
}
</script>
<script>
    // Popup functionality
    const popupWrapper = document.getElementById('popup-wrapper');
    const modalSlider = document.getElementById('modal-slider');
    const closePopupBtn = document.getElementById('close-vendor-popup-btn');
    const popupImage = document.getElementById('popupImage');
    const orderDetailLinks = document.querySelectorAll('.order-detail-link');
    orderDetailLinks.forEach(link => {
        link.addEventListener('click', function (event) {
            event.preventDefault();
            const orderData = JSON.parse(this.getAttribute('data-order'));
            console.log(orderData.groupname);
            // Populate the popup with order details
            document.getElementById('poitem_order_id').value = orderData.order_id || '';
            document.getElementById('order_number').textContent = orderData.order_number || 'N/A';
            document.getElementById('order_date').textContent = orderData.order_date || 'N/A';
            document.getElementById('hsn').textContent = orderData.hsn || 'N/A';
            document.getElementById('groupname').textContent = orderData.groupname || 'N/A';
            document.getElementById('quantity').textContent = orderData.quantity || 'N/A';
            document.getElementById('item').textContent = orderData.title || 'N/A';
            document.getElementById('sub_category').textContent = orderData.subcategories || 'N/A';
            document.getElementById('size').textContent = orderData.size || 'N/A';
            document.getElementById('color').textContent = orderData.color || 'N/A';
            document.getElementById('item_price').textContent = orderData.itemprice ? '' + orderData.itemprice : 'N/A';
            document.getElementById('final_price').textContent = orderData.finalprice ? '' + orderData.finalprice : 'N/A';
            document.getElementById('cost_price').textContent = orderData.cost_price ? '' + orderData.cost_price : 'N/A';
            document.getElementById('currency').textContent = orderData.currency || 'N/A';
            document.getElementById('gst').textContent = orderData.gst || 'N/A';
            document.getElementById('marketplace').textContent = orderData.marketplace_vendor || 'N/A';
            document.getElementById('local_stock').textContent = orderData.local_stock || 'N/A';
            document.getElementById('location').textContent = orderData.location || 'N/A';
            document.getElementById('description').textContent = orderData.description || 'N/A';
            document.getElementById('material').textContent = orderData.material || 'N/A';
            document.getElementById('backorder_status').textContent = orderData.backorder_status || 'N/A';
            document.getElementById('backorder_percent').textContent = orderData.backorder_percent || 'N/A';
            document.getElementById('backorder_delay').textContent = orderData.backorder_delay || 'N/A';
            document.getElementById('numsold').textContent = orderData.numsold || 'N/A';
            document.getElementById('po_number').textContent = orderData.po_number || 'N/A';
            document.getElementById('po_date').textContent = orderData.po_date || 'N/A';
            document.getElementById('expected_delivery_date').textContent = orderData.expected_delivery_date || 'N/A';
            document.getElementById('product_weight').textContent = orderData.product_weight || 'N/A';
            document.getElementById('product_weight_unit').textContent = orderData.product_weight_unit || 'N/A';
            document.getElementById('prod_height').textContent = orderData.prod_height || 'N/A';
            document.getElementById('prod_width').textContent = orderData.prod_width || 'N/A';
            document.getElementById('prod_length').textContent = orderData.prod_length || 'N/A';
            document.getElementById('length_unit').textContent = orderData.length_unit || 'N/A';
            document.getElementById('payment_type').textContent = orderData.payment_type || 'N/A';
            document.getElementById('coupon').textContent = orderData.coupon || 'N/A';
            document.getElementById('coupon_reduce').textContent = orderData.coupon_reduce || 'N/A';
            document.getElementById('giftvoucher').textContent = orderData.giftvoucher ||  'N/A';
            document.getElementById('giftvoucher_reduce').textContent = orderData.giftvoucher_reduce || 'N/A';
            document.getElementById('credit').textContent = orderData.credit || 'N/A';
            document.getElementById('vendor').textContent = orderData.vendor || 'N/A';
                    
            const imgElem = document.querySelector('#vendor-popup-panel img');
            imgElem.src = orderData.image || 'https://placehold.co/100x80/e2e8f0/4a5568?text=No+Image';
            const infoDiv = imgElem.nextElementSibling;     
            document.getElementById('shipping_country').textContent = orderData.shipping_country || 'N/A';
            // Order Addons
            const addonsDiv = document.getElementById('order_addons');
            addonsDiv.innerHTML = '';
            let options = orderData.options || [];
            if (typeof options === 'string') {
                try {
                    options = JSON.parse(options);
                } catch (e) {
                    options = [options];
                }
            }

            if (Array.isArray(options) && options.length > 0) {
                addonsDiv.innerHTML = ''; // clear
                options.forEach(opt => {
                    const chip = document.createElement('span');
                    chip.className = 'inline-block bg-gray-100 text-sm px-2 py-1 rounded mr-2 mb-2';
                    chip.textContent = opt;
                    addonsDiv.appendChild(chip);
                });
            } if(options == [] || options == '' || options == null || options.length == 0 || options == 'Array') {
                addonsDiv.textContent = 'N/A';
            } else {
                addonsDiv.textContent = 'N/A';
            }
            /*fetchOrderDetails(orderData.id).then(orderDetails => {
                //console.log(orderDetails.order);
                // Populate the popup with order details
                document.getElementById('gst').textContent = orderDetails.order.gst || 'N/A';                       
                
                document.getElementById('final_price').textContent = orderDetails.order.finalprice ? '₹' + orderDetails.order.finalprice : 'N/A';
                document.getElementById('item_price').textContent = orderDetails.order.itemprice ? '₹' + orderDetails.order.itemprice : 'N/A';
                document.getElementById('cost_price').textContent = orderDetails.order.cost_price ? '₹' + orderDetails.order.cost_price : 'N/A';
                document.getElementById('currency').textContent = orderDetails.order.currency || 'N/A';
                document.getElementById('item').textContent = orderDetails.order.title || 'N/A';
                document.getElementById('sub_category').textContent = orderDetails.order.subcategories || 'N/A';
                document.getElementById('size').textContent = orderDetails.order.size || 'N/A';
                document.getElementById('color').textContent = orderDetails.order.color || 'N/A';
                document.getElementById('marketplace').textContent = orderDetails.order.marketplace_vendor || 'N/A';
                document.getElementById('local_stock').textContent = orderDetails.order.local_stock || 'N/A';
                document.getElementById('location').textContent = orderDetails.order.location || 'N/A';
                
                // Other details
                const imgElem = document.querySelector('#vendor-popup-panel img');
                imgElem.src = orderDetails.order.image || 'https://placehold.co/100x80/e2e8f0/4a5568?text=No+Image';
                const infoDiv = imgElem.nextElementSibling;
                infoDiv.innerHTML = `
                    <p><strong>Order Number:</strong> ${orderDetails.order.order_number || 'N/A'}</p>
                    <p><strong>Order Date:</strong> ${orderDetails.order.order_date || 'N/A'}</p>
                    <p><strong>HSN Code:</strong> ${orderDetails.order.hsn || 'N/A'}</p>
                    <p><strong>Category:</strong> ${orderDetails.order.groupname || 'N/A'}</p>
                    <p><strong>Quantity:</strong> ${orderDetails.order.quantity || 'N/A'}</p>
                    <p><strong>Shipping Country:</strong> ${orderDetails.order.shipping_country || 'N/A'}</p>
                `;
            });*/
            openPopup();
        });
    });
    function openPopup() {
        popupWrapper.classList.remove('hidden');
        setTimeout(() => {
            modalSlider.classList.remove('translate-x-full');
        }, 10); // Slight delay to allow transition
    }
    closePopupBtn.addEventListener('click', () => {
        modalSlider.classList.add('translate-x-full');
        setTimeout(() => {
            popupWrapper.classList.add('hidden');
        }, 300); // Match the duration of the CSS transition
    });
    // function populateOrderDetails(order) {
    //     document.getElementById('description').textContent = order.title || 'N/A';
    //     document.getElementById('gst').textContent = order.gst || 'N/A';
    //     document.getElementById('hsn').textContent = order.hsn || 'N/A';
    //     document.getElementById('po_number').textContent = order.po_number || 'N/A';
    //     document.getElementById('quantity').textContent = order.quantity || 'N/A';
    // }
    function fetchOrderDetails(id) {
        return fetch('?page=orders&action=get_order_details&id=' + encodeURIComponent(id))
            .then(r => r.json());
    }
    function checkPoItmes() {
        
        const checkedRows = document.querySelectorAll('input[name="poitem[]"]:checked');
        if (checkedRows.length === 0) {
            alert("Please select at least one order to create a Purchase Order.");
            event.preventDefault(); // Prevent form submission
            return false;
        }
        return true; // Allow form submission if at least one item is checked
    }
    
    document.addEventListener('DOMContentLoaded', function () {
        // Accordion functionality
        const accordionButton = document.getElementById('accordion-button');
        const accordionContent = document.getElementById('accordion-content');
        const accordionIcon = document.getElementById('accordion-icon');

        accordionButton.addEventListener('click', () => {
            const isExpanded = accordionButton.getAttribute('aria-expanded') === 'true';
            accordionButton.setAttribute('aria-expanded', !isExpanded);
            if (accordionContent.classList.contains('hidden')) {
                accordionContent.classList.remove('hidden');
                accordionIcon.classList.add('rotate-180');
            } else {
                accordionContent.classList.add('hidden');
                accordionIcon.classList.remove('rotate-180');
            }
        });

        // Tab functionality
        // const tabs = document.querySelectorAll('.tab');
        // tabs.forEach(tab => {
        //     tab.addEventListener('click', function (event) {
        //         event.preventDefault();
        //         tabs.forEach(t => t.classList.remove('tab-active'));
        //         this.classList.add('tab-active');
        //     });
        // });

        // Date validation and clear functionality
        const fromDateInput = document.getElementById('order-from');
        const toDateInput = document.getElementById('order-till');
        const clearButton = document.getElementById('clear-button');

        fromDateInput.addEventListener('input', function() {
            if (fromDateInput.value) {
                toDateInput.min = fromDateInput.value;
            } else {
                toDateInput.min = null;
            }
        });

        function clearFilters() {
            fromDateInput.value = '';
            toDateInput.value = '';
            toDateInput.min = null;
        }

        clearButton.addEventListener('click', clearFilters);
    });
    // Image popup functionality
    function openImagePopup(imageUrl) {
        popupImage.src = imageUrl;
        document.getElementById('imagePopup').classList.remove('hidden');
    }
    
    // Key for localStorage
    const STORAGE_KEY = 'selected_po_orders';

    // Save checked IDs to localStorage (merge with previous selections)
    function saveCheckedOrders() {
        // Get all previously checked IDs
        let checked = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        // Get all checkboxes on current page
        const allCbs = Array.from(document.querySelectorAll('input[name="poitem[]"]'));
        // Get checked on current page
        const checkedOnPage = allCbs.filter(cb => cb.checked).map(cb => cb.value);
        // Get unchecked on current page
        const uncheckedOnPage = allCbs.filter(cb => !cb.checked).map(cb => cb.value);

        // Remove unchecked from previous selection
        checked = checked.filter(id => !uncheckedOnPage.includes(id));
        // Add newly checked
        checkedOnPage.forEach(id => {
            if (!checked.includes(id)) checked.push(id);
        });

        localStorage.setItem(STORAGE_KEY, JSON.stringify(checked));
    }

    // Restore checked IDs from localStorage
    function restoreCheckedOrders() {
        const checked = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        document.querySelectorAll('input[name="poitem[]"]').forEach(cb => {
            cb.checked = checked.includes(cb.value);
        });
    }

    // Listen for checkbox changes
    document.addEventListener('change', function(e) {
        if (e.target && e.target.name === 'poitem[]') {
            saveCheckedOrders();
        }
    });

    // Restore on page load
    document.addEventListener('DOMContentLoaded', restoreCheckedOrders);

    // Optional: Clear storage on successful PO creation
    // document.querySelector('form[action*="purchase_orders&action=create"]').addEventListener('submit', function() {
    //     localStorage.removeItem(STORAGE_KEY);
    // });

    // On form submit, add hidden inputs for all selected IDs
    document.querySelector('form[action*="purchase_orders&action=create"]').addEventListener('submit', function(e) {
        // Remove previous hidden inputs (if any)
        document.querySelectorAll('input.poitem_hidden').forEach(el => el.remove());

        // Get all selected IDs from localStorage
        const checked = JSON.parse(localStorage.getItem('selected_po_orders') || '[]');

        // Get all visible checked checkboxes on the current page
        const visibleChecked = Array.from(document.querySelectorAll('input[name="poitem[]"]:checked')).map(cb => cb.value);

        // For each ID in localStorage, add a hidden input ONLY if it's not already checked and visible
        checked.forEach(id => {
            if (!visibleChecked.includes(id)) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = 'poitem[]';
                input.value = id;
                input.className = 'poitem_hidden';
                this.appendChild(input);
            }
        });

        // Optionally clear localStorage after submit
        localStorage.removeItem('selected_po_orders');
    });
    
    //call import function
    function callImport(){
        //open import popup to display import status and call ajax to import
        document.getElementById('importPopup').classList.remove('hidden');      
        
    }
    function closeImportPopup(e) {
        // If called from button or outside click
        document.getElementById('importPopup').classList.add('hidden');
        location.reload();
    }
    //import calling through ajax
    document.getElementById('importForm').addEventListener('submit', function(e){
        e.preventDefault(); // Prevent default form submission
        //loading image and submit button disable
        const orderId = document.getElementById('importOrderId').value;
        const submitButton = document.querySelector('#importForm button[type="submit"]');
        const loadingImage = document.createElement('img');
        loadingImage.src = 'images/loading-crop.gif'; // Path to your loading image
        loadingImage.alt = 'Loading...';
        loadingImage.style.height = '50px';
        loadingImage.classList.add('loading-image');
        submitButton.parentNode.insertBefore(loadingImage, submitButton);
        submitButton.disabled = true;
        document.getElementById('errorMessage').textContent = 'Import in progress...';
        let progress = 0;
        const interval = setInterval(() => {
            progress += 10;
            document.getElementById('importProgress').style.width = `${progress}%`;
            document.getElementById('importProgress').textContent = `${progress}%`;
            if (progress >= 45) {
                clearInterval(interval);
            }
        }, 100);
        const form = this;
        const formData = new FormData(form);

        fetch('index.php?page=orders&action=import_orders&secret_key=b2d1127032446b78ce2b8911b72f6b155636f6898af2cf5d3aafdccf46778801&orderid=' + orderId, {
            method: 'GET',
        })
        .then(response => response.text())
        .then(text => {
            // Try to parse JSON; if parsing fails, treat response as HTML/text
            try {
                return JSON.parse(text);
            } catch (e) {
                return { message: null, html: text };
            }
        })
        .then(data => {
            // Remove loading image and enable submit button
            loadingImage.remove();
            submitButton.disabled = false;
            //increment gradually to show activity
            
            const interval = setInterval(() => {
                progress += 10;
                document.getElementById('importProgress').style.width = `${progress}%`;
                document.getElementById('importProgress').textContent = `${progress}%`;
                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 100);

            document.getElementById('errorMessage').classList.add('text-green-500');
            document.getElementById('errorMessage').textContent = 'Import completed successfully.';
            if (data && data.message) {
                alert(data.message || 'Import completed.');
            } else if (data && data.html) {
                // Server returned HTML; log it for debugging and show a generic success message
                document.getElementById('importStatus').innerHTML = data.html;
                //console.log('Server response (HTML):', data.html);
                //alert('Import completed. Server returned HTML response.');
            } else {
                alert('Import completed.');
            }
            //closeImportPopup();
            // Optionally, refresh the page or update the order list
            //location.reload();
        })
        .catch(error => {
            console.error('Error during import:', error);
            alert('An error occurred during import.');
            closeImportPopup();
        });
    });
    //toggle order number input
    function toggleOrderNumberInput(){      
        const importType = document.getElementById('importType').value;
        const orderNumberDiv = document.getElementById('orderNumberDiv');
        if(importType === 'specific'){
            orderNumberDiv.classList.remove('hidden');
        } else {
            orderNumberDiv.classList.add('hidden');
            document.getElementById('importOrderId').value = '';
        }
    }
    // Toggle menu visibility
    function toggleMenu(orderId) {
        const menu = document.getElementById('menu-' + orderId);        
        menu.style.display = 'block';       
    }
    // Close menus when clicking outside
    document.addEventListener('click', function(event) {
        // don't close if click is inside a menu or on the menu button (handles inner elements like <i>)
        if (event.target.closest('.menu-popup-order') || event.target.closest('.menu-button')) {
            return;
        }
        document.querySelectorAll('.menu-popup-order').forEach(function(menu) {
            menu.style.display = 'none';
        });
    });
    function openStatusPopup(orderId) {
        document.getElementById('status_order_id').value = orderId;
        document.getElementById('statusPopup').classList.remove('hidden');
        document.getElementById('orderStatusError').textContent = '';
        document.getElementById('orderStatusError').classList.add('hidden');
        document.getElementById('orderRemarks').value = '';
        document.getElementById('orderPriority').value = '';
        
        
        // Close the menu
        const menu = document.getElementById('menu-' + orderId);
        if (menu) {
            menu.style.display = 'none';
        }
        // update fields with order data
        const orderData = JSON.parse(document.querySelector('#order-id-' + orderId).getAttribute('data-order'));
        document.getElementById('orderRemarks').value = orderData.remarks || '';
        document.getElementById('orderStatus').value = orderData.status || '';
        document.getElementById('status_order_number').textContent = orderData.order_number || 'N/A';
        document.getElementById('status_item_code').textContent = orderData.item_code || 'N/A';
        document.getElementById('status_vendor_name').textContent = orderData.vendor_name || 'N/A';
        document.getElementById('status_category').textContent = orderData.groupname || 'N/A';
        document.getElementById('status_sub_category').textContent = orderData.subcategories || 'N/A';
        document.getElementById('status_item').textContent = orderData.title || 'N/A';
        document.getElementById('orderPriority').value = orderData.priority || '';
        // display ESD in dd-mm-yyyy format while keeping the date input usable
        (function(){
            const statusESD = document.getElementById('statusESD');
            const raw = orderData.esd || '';

            if (!statusESD) return;

            // expect raw in yyyy-mm-dd
            const m = raw.match(/^(\d{4})-(\d{2})-(\d{2})$/);
            if (m) {
                const formatted = `${m[3]}-${m[2]}-${m[1]}`; // dd-mm-yyyy

                if (statusESD.type === 'date') {
                    // keep the actual input value in yyyy-mm-dd so the native picker works
                    statusESD.value = raw;
                } else {
                    // if it's a text field, set the formatted value directly
                    statusESD.value = formatted;
                }
            } else {
                // fallback: if format unknown, set raw value
                statusESD.value = raw || '';
            }
        })();
        //console.log(orderData.esd);
        //image
        const imgElem = document.querySelector('#statusPopup img');
        imgElem.src = orderData.image || 'default-image.png';
    }
    
    function closeStatusPopup() {
        document.getElementById('statusPopup').classList.add('hidden');
    }
    // submit status form with validation
    document.getElementById('statusForm').addEventListener('submit', function(e){
        const statusSelect = document.getElementById('orderStatus');
        const errorDiv = document.getElementById('orderStatusError');
        if(statusSelect.value === '') {
            e.preventDefault();
            errorDiv.classList.remove('hidden');
        } else {
            errorDiv.classList.add('hidden');
        }
        // Ajax submit the form if validation passes       
        if (statusSelect.value !== '') {
            e.preventDefault();
            const formData = new FormData(document.getElementById('statusForm'));
            fetch('?page=orders&action=update_status', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    errorDiv.classList.remove('text-red-500');
                    errorDiv.classList.add('text-green-500');
                    errorDiv.textContent = 'Order status updated successfully.';
                    errorDiv.classList.remove('hidden');
                    //closeStatusPopup();
                    setTimeout(() => {
                        closeStatusPopup();
                        location.reload();
                    }, 2000);
                } else {
                    errorDiv.textContent = 'Error updating order status.';
                    errorDiv.classList.remove('hidden');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while updating order status.');
            });
        }

    });

</script>